<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SINDBAD</title>
    <meta name="description" content="A model-data integration framework for terrestrial ecosystem processes">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.DsG9QtoC.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.Bh4yM84A.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D1ciiJUe.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CCZvcHlP.js">
    <link rel="modulepreload" href="/assets/pages_code_tem.md.D291sNF-.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/" data-v-0f4f798b><!--[--><!--]--><!--[--><img class="VPImage logo" src="/sindbad_logo.png" width="24" height="24" alt data-v-35a7d0b8><!--]--><span data-v-0f4f798b>SINDBAD</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Concept</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/concept/overview.html" data-v-acbfed09><!--[--><span data-v-acbfed09>SINDBAD</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/concept/experiment.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Experiment</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/concept/TEM.html" data-v-acbfed09><!--[--><span data-v-acbfed09>TEM</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/concept/info.html" data-v-acbfed09><!--[--><span data-v-acbfed09>info</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/concept/land.html" data-v-acbfed09><!--[--><span data-v-acbfed09>land</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Settings</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/overview.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Overview</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/experiment.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Experiments</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/forcing.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Forcing</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/model_structure.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Models</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/optimization.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Optimization</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/settings/parameters.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Parameters</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Code</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/overview.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Sindbad</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/sindbad.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Core</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/models.html" data-v-acbfed09><!--[--><span data-v-acbfed09>   ++ Models</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/types.html" data-v-acbfed09><!--[--><span data-v-acbfed09>   ++ Types</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/data.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Data</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/experiment.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Experiment</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/metrics.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Metrics</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/ml.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + ML</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/optimization.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Optimization</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/setup.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Setup</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link active" href="/pages/code/tem.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + TEM</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/utils.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Utils</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/code/visuals.html" data-v-acbfed09><!--[--><span data-v-acbfed09> + Visuals</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Develop</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/overview.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Overview</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/install.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Install</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/conventions.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Modeling Convention</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/model_approach.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Model/Approach</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/sindbad_types.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Sindbad Types</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/array_handling.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Array Handling</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/land_utils.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Land Utils</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/experiments.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Experiments</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/spinup.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Spinup</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/optimization_method.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Optimization Methods</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/cost_metrics.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Cost Metrics</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/cost_function.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Cost Function</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/how_to_doc.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Documentation</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/develop/helpers.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Useful Helpers</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>About</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/about/contact.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Contact</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/about/license.html" data-v-acbfed09><!--[--><span data-v-acbfed09>License</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/about/publications.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Publications</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/about/support.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Support</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/pages/about/team.html" data-v-acbfed09><!--[--><span data-v-acbfed09>Team</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><VersionPicker data-v-e6d46098></VersionPicker><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/EarthyScience/SINDBAD" aria-label="repo address" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/EarthyScience/SINDBAD" aria-label="repo address" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="Enhanced Readability" role="menuitem" data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><span class="i-icon-park-outline:book-open option-icon" data-v-04f5c5e9></span><!----><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Concept</h2><!----></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/concept/overview.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>SINDBAD</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/concept/experiment.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Experiment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/concept/TEM.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>TEM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/concept/info.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>info</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/concept/land.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>land</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Develop</h2><!----></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/overview.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/install.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Install</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/conventions.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Modeling Convention</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/model_approach.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Model/Approach</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/sindbad_types.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Sindbad Types</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/array_handling.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Array Handling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/land_utils.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Land Utils</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/experiments.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Experiments</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/spinup.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Spinup</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/optimization_method.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Optimization Methods</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/cost_metrics.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Cost Metrics</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/cost_function.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Cost Function</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/how_to_doc.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Documentation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/develop/helpers.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Useful Helpers</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Settings</h2><!----></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/overview.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/experiment.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Experiments</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/forcing.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Forcing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/model_structure.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Models</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/optimization.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Optimization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/settings/parameters.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Parameters</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Code</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4b0d9bf><span class="vpi-chevron-right caret-icon" data-v-a4b0d9bf></span></div></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/overview.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Sindbad</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/sindbad.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Core</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/models.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>   ++ Models</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/types.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>   ++ Types</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/data.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Data</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/experiment.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Experiment</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/metrics.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Metrics</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/ml.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + ML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/optimization.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Optimization</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/setup.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Setup</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/tem.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + TEM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/utils.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Utils</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/code/visuals.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf> + Visuals</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>About</h2><!----></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/about/contact.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Contact</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/about/license.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>License</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/about/publications.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Publications</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/about/support.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Support</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/pages/about/team.html" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Team</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _pages_code_tem" data-v-83890dd9><div><details class="jldocstring custom-block" open><summary><a id="SindbadTEM" href="#SindbadTEM"><span class="jlbinding">SindbadTEM</span></a> <span class="VPBadge info jlObjectType jlModule"><!--[-->Module<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SindbadTEM</span></span></code></pre></div><p>The <code>SindbadTEM</code> package provides the core functionality for running the SINDBAD Terrestrial Ecosystem Model (TEM). It includes utilities for preparing model-ready objects, managing spinup processes and running models.</p><p><strong>Purpose:</strong></p><p>This package integrates various components and utilities required to execute the SINDBAD TEM, including precomputations, spinup, and time loop simulations. It supports parallel execution and efficient handling of large datasets.</p><p><strong>Dependencies:</strong></p><ul><li><p><code>ComponentArrays</code>: Used for managing complex, hierarchical data structures like land variables and model states.</p></li><li><p><code>NLsolve</code>: Used for solving nonlinear equations, particularly in spinup processes (e.g., fixed-point solvers).</p></li><li><p><code>ProgressMeter</code>: Displays progress bars for long-running simulations, improving user feedback.</p></li><li><p><code>Sindbad</code>: Provides the core SINDBAD models and types.</p></li><li><p><code>SindbadData</code>: Provides the SINDBAD data handling functions.</p></li><li><p><code>SindbadUtils</code>: Provides utility functions for handling NamedTuple, spatial operations, and other helper tasks for spatial and temporal operations.</p></li><li><p><code>SindbadSetup</code>: Provides the SINDBAD setup functions.</p></li><li><p><code>ThreadPools</code>: Enables efficient thread-based parallelization for running simulations across multiple locations.</p></li></ul><p><strong>Included Files:</strong></p><ol><li><strong><code>utilsTEM.jl</code></strong>:</li></ol><ul><li>Contains utility functions for handling extraction of forcing data, managing/filling outputs, and other helper operations required during TEM execution.</li></ul><ol start="2"><li><strong><code>deriveSpinupForcing.jl</code></strong>:</li></ol><ul><li>Provides functionality for deriving spinup forcing data, which is used to force the model during initialization to a steady state.</li></ul><ol start="3"><li><strong><code>prepTEMOut.jl</code></strong>:</li></ol><ul><li>Handles the preparation of output structures, ensuring that results are stored efficiently during simulations.</li></ul><ol start="4"><li><strong><code>runModels.jl</code></strong>:</li></ol><ul><li>Contains functions for executing individual models within the SINDBAD framework.</li></ul><ol start="5"><li><strong><code>prepTEM.jl</code></strong>:</li></ol><ul><li>Prepares the necessary inputs and configurations for running the TEM, including spatial and temporal data preparation.</li></ul><ol start="6"><li><strong><code>runTEMLoc.jl</code></strong>:</li></ol><ul><li>Implements the logic for running the TEM for a single location, including optional spinup and the main simulation loop.</li></ul><ol start="7"><li><strong><code>runTEMSpace.jl</code></strong>:</li></ol><ul><li>Extends the functionality to handle spatial grids, enabling simulations across multiple locations with parallel execution.</li></ul><ol start="8"><li><strong><code>runTEMCube.jl</code></strong>:</li></ol><ul><li>Adds support for running the TEM on 3D data YAXArrayscubes, useful for large-scale simulations with spatial dimensions.</li></ul><ol start="9"><li><strong><code>spinupTEM.jl</code></strong>:</li></ol><ul><li>Manages the spinup process, initializing the model to a steady state using various methods (e.g., ODE solvers, fixed-point solvers).</li></ul><ol start="10"><li><strong><code>spinupSequence.jl</code></strong>:</li></ol><ul><li>Handles sequential spinup loops, allowing for iterative refinement of model states during the spinup process.</li></ul><p><strong>Notes:</strong></p><ul><li><p>The package is designed to be modular and extensible, allowing users to customize and extend its functionality for specific use cases.</p></li><li><p>It integrates tightly with the SINDBAD framework, leveraging shared types and utilities from <code>SindbadSetup</code>.</p></li></ul></details><h2 id="Exported" tabindex="-1">Exported <a class="header-anchor" href="#Exported" aria-label="Permalink to &quot;Exported {#Exported}&quot;">​</a></h2><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.TEMYax-Tuple" href="#SindbadTEM.TEMYax-Tuple"><span class="jlbinding">SindbadTEM.TEMYax</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TEMYax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(map_cubes; loc_land</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, selected_models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing_vars</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>map_cubes</code>: collection/tuple of all input and output cubes from mapCube</p></li><li><p><code>loc_land</code>: initial SINDBAD land with all fields and subfields</p></li><li><p><code>tem</code>: a nested NT with necessary information of helpers, models, and spinup needed to run SINDBAD TEM and models</p></li><li><p><code>selected_models</code>: a tuple of all models selected in the given model structure</p></li><li><p><code>forcing_vars</code>: forcing variables</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.computeTEM-Tuple{LongTuple, Any, Any, Any}" href="#SindbadTEM.computeTEM-Tuple{LongTuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.computeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">computeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the compute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any, DoDebugModel}" href="#SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any, DoDebugModel}"><span class="jlbinding">SindbadTEM.computeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">computeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>debug the compute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>::DoDebugModel</code>: a type dispatch to debug the compute functions of model</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any, DoNotDebugModel}" href="#SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any, DoNotDebugModel}"><span class="jlbinding">SindbadTEM.computeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">computeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>run the compute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>::DoNotDebugModel</code>: a type dispatch to not debug but run the compute functions of model</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any}" href="#SindbadTEM.computeTEM-Tuple{Tuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.computeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">computeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the compute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.coreTEM" href="#SindbadTEM.coreTEM"><span class="jlbinding">SindbadTEM.coreTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">coreTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_spinup_forcing, loc_forcing_t, loc_land, tem_info, spinup_mode)</span></span></code></pre></div><p>Runs the SINDBAD Terrestrial Ecosystem Model (TEM) for a single location, with or without spinup, based on the specified <code>spinup_mode</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>loc_forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for a single location.</p></li><li><p><code>loc_spinup_forcing</code>: A forcing NamedTuple for spinup, used to initialize the model to a steady state (only used if spinup is enabled).</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>loc_land</code>: Initial SINDBAD land NamedTuple with all fields and subfields.</p></li><li><p><code>tem_info</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li><li><p><code>spinup_mode</code>: A type that determines whether spinup is included or excluded</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>land_time_series</code>: A vector of SINDBAD land states for each time step after the model simulation.</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.coreTEM!-NTuple{7, Any}" href="#SindbadTEM.coreTEM!-NTuple{7, Any}"><span class="jlbinding">SindbadTEM.coreTEM!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">coreTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_spinup_forcing, loc_forcing_t, loc_output, loc_land, tem_info)</span></span></code></pre></div><p>Executes the core SINDBAD Terrestrial Ecosystem Model (TEM) for a single location, including precomputations, spinup, and the main time loop.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>loc_forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for a single location.</p></li><li><p><code>loc_spinup_forcing</code>: A forcing NamedTuple for spinup, used to initialize the model to a steady state (only used if spinup is enabled).</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>loc_output</code>: An output array or view for storing the model outputs for a single location.</p></li><li><p><code>loc_land</code>: Initial SINDBAD land NamedTuple with all fields and subfields.</p></li><li><p><code>tem_info</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li></ul><p><strong>Details</strong></p><p>Executes the main TEM simulation logic with the provided parameters and data. Handles both regular simulation and spinup modes based on the spinup_mode flag.</p><p><strong>Extended help</strong></p><ul><li><strong>Precomputations</strong>: <ul><li>The function runs <code>precomputeTEM</code> to prepare the land state for the simulation.</li></ul></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.definePrecomputeTEM-Tuple{LongTuple, Any, Any, Any}" href="#SindbadTEM.definePrecomputeTEM-Tuple{LongTuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.definePrecomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">definePrecomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LongTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing, land, model_helpers)</span></span></code></pre></div><p>run the precompute function of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.definePrecomputeTEM-Tuple{Tuple, Any, Any, Any}" href="#SindbadTEM.definePrecomputeTEM-Tuple{Tuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.definePrecomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">definePrecomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the define and precompute functions of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getAllSpinupForcing-Tuple{Any, Vector{SpinupSequenceWithAggregator}, Any}" href="#SindbadTEM.getAllSpinupForcing-Tuple{Any, Vector{SpinupSequenceWithAggregator}, Any}"><span class="jlbinding">SindbadTEM.getAllSpinupForcing</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getAllSpinupForcing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, spin_seq, tem_helpers)</span></span></code></pre></div><p>prepare the spinup forcing all forcing setups in the spinup sequence</p><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>spin_seq</code>: a sequence of information to carry out spinup at different steps with information on models to use, forcing, stopping critera, etc.</p></li><li><p><code>tem_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getDeltaPool-Tuple{AbstractArray, Any, Any}" href="#SindbadTEM.getDeltaPool-Tuple{AbstractArray, Any, Any}"><span class="jlbinding">SindbadTEM.getDeltaPool</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getDeltaPool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pool_dat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, spinup_info, t)</span></span></code></pre></div><p>helper function to run the spinup models and return the delta in a given pool over the simulation. Used in solvers from DifferentialEquations.jl.</p><p><strong>Arguments:</strong></p><ul><li><p><code>pool_dat</code>: new values of the storage pools</p></li><li><p><code>spinup_info</code>: NT with all the necessary information to run the spinup models</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getForcingForTimeStep-Union{Tuple{forc_with_type}, Tuple{Any, Any, Any, Val{forc_with_type}}} where forc_with_type" href="#SindbadTEM.getForcingForTimeStep-Union{Tuple{forc_with_type}, Tuple{Any, Any, Any, Val{forc_with_type}}} where forc_with_type"><span class="jlbinding">SindbadTEM.getForcingForTimeStep</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getForcingForTimeStep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_forcing_t, ts, Val{forc_with_type})</span></span></code></pre></div><p>Get forcing values for a specific time step based on the forcing type.</p><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>loc_forcing_t</code>: a forcing NT for a single timestep to be reused in every time step</p></li><li><p><code>ts</code>: time step to get the forcing for</p></li><li><p><code>forc_with_type</code>: Value type parameter specifying the forcing type</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getLocData-Tuple{AbstractArray, Any}" href="#SindbadTEM.getLocData-Tuple{AbstractArray, Any}"><span class="jlbinding">SindbadTEM.getLocData</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getLocData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, output_array, loc_ind)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>output_array</code>: an output array/view for ALL locations</p></li><li><p><code>loc_ind</code>: a tuple with the spatial indices of the data for a given location</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getLocData-Tuple{NamedTuple, AbstractArray, Any}" href="#SindbadTEM.getLocData-Tuple{NamedTuple, AbstractArray, Any}"><span class="jlbinding">SindbadTEM.getLocData</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getLocData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, output_array, loc_ind)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>output_array</code>: an output array/view for ALL locations</p></li><li><p><code>loc_ind</code>: a tuple with the spatial indices of the data for a given location</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getLocData-Tuple{NamedTuple, Any}" href="#SindbadTEM.getLocData-Tuple{NamedTuple, Any}"><span class="jlbinding">SindbadTEM.getLocData</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getLocData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, output_array, loc_ind)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>loc_ind</code>: a tuple with the spatial indices of the data for a given location</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getOutDims" href="#SindbadTEM.getOutDims"><span class="jlbinding">SindbadTEM.getOutDims</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getOutDims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers[, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputMArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputSizedArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputYAXArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Retrieves the dimensions for SINDBAD output based on the specified array backend.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>forcing_helpers</code>: A NamedTuple with information on forcing sizes and dimensions.</p></li><li><p><code>::OutputArray</code>: (Optional) A type dispatch for using a base Array as the array backend.</p></li><li><p><code>::OutputMArray</code>: (Optional) A type dispatch for using MArray as the array backend.</p></li><li><p><code>::OutputSizedArray</code>: (Optional) A type dispatch for using SizedArray as the array backend.</p></li><li><p><code>::OutputYAXArray</code>: (Optional) A type dispatch for using YAXArray as the array backend.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A vector of output dimensions, where each dimension is represented as a tuple of <code>Dim</code> objects.</li></ul><p><strong>Notes:</strong></p><ul><li><p>For <code>OutputArray</code>, <code>OutputMArray</code>, and <code>OutputSizedArray</code>, all dimensions are included.</p></li><li><p>For <code>OutputYAXArray</code>, spatial dimensions are excluded, and metadata is added for each variable.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Using a base Array</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Using YAXArray</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputYAXArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Default behavior</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getOutDimsArrays" href="#SindbadTEM.getOutDimsArrays"><span class="jlbinding">SindbadTEM.getOutDimsArrays</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers[, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputMArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputSizedArray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputYAXArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Retrieves the dimensions and corresponding data for SINDBAD output based on the specified array backend.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>forcing_helpers</code>: A NamedTuple with information on forcing sizes and dimensions.</p></li><li><p><code>::OutputArray</code>: (Optional) A type dispatch for using a base Array as the array backend.</p></li><li><p><code>::OutputMArray</code>: (Optional) A type dispatch for using MArray as the array backend.</p></li><li><p><code>::OutputSizedArray</code>: (Optional) A type dispatch for using SizedArray as the array backend.</p></li><li><p><code>::OutputYAXArray</code>: (Optional) A type dispatch for using YAXArray as the array backend.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A tuple <code>(outdims, outarray)</code>: <ul><li><p><code>outdims</code>: A vector of output dimensions, where each dimension is represented as a tuple of <code>Dim</code> objects.</p></li><li><p><code>outarray</code>: The corresponding data array, initialized based on the specified array backend.</p></li></ul></li></ul><p><strong>Notes:</strong></p><ul><li><p>For <code>OutputArray</code>, <code>OutputMArray</code>, and <code>OutputSizedArray</code>, the data array is initialized with the appropriate backend type.</p></li><li><p>For <code>OutputYAXArray</code>, the data array is set to <code>nothing</code>, as YAXArray handles data differently.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Using a base Array</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims, outarray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Using MArray</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims, outarray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputMArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Using SizedArray</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims, outarray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputSizedArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Using YAXArray</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims, outarray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OutputYAXArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Default behavior</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims, outarray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSequence-Tuple{Any, Any}" href="#SindbadTEM.getSequence-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.getSequence</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSequence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(year_disturbance, nrepeat_base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, year_start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1979</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>year_disturbance</code>: a year date, as an string</p></li><li><p><code>nrepeat_base</code>=200 [default]</p></li><li><p><code>year_start</code>: 1979 [default] start year, as an interger</p></li></ul><p><strong>Outputs</strong></p><ul><li>new spinup sequence object</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpatialInfo" href="#SindbadTEM.getSpatialInfo"><span class="jlbinding">SindbadTEM.getSpatialInfo</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpatialInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing_helpers)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpatialInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, filterNanPixels)</span></span></code></pre></div><p>get the information of the indices of the data to run the model for. The second variant additionally filter pixels with all nan data</p><p><strong>Arguments:</strong></p><ul><li><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpinupInfo-NTuple{7, Any}" href="#SindbadTEM.getSpinupInfo-NTuple{7, Any}"><span class="jlbinding">SindbadTEM.getSpinupInfo</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, spinup_pool_name, tem_info, tem_spinup)</span></span></code></pre></div><p>helper function to create a NamedTuple with all the variables needed to run the spinup models in getDeltaPool. Used in solvers from DifferentialEquations.jl.</p><p><strong>Arguments:</strong></p><ul><li><p><code>spinup_models</code>: a tuple of a subset of all models in the given model structure that is selected for spinup</p></li><li><p><code>spinup_forcing</code>: a selected/sliced/computed forcing time series for running the spinup sequence for a location</p></li><li><p><code>loc_forcing_t</code>: a forcing NT for a single location and a single time step</p></li><li><p><code>land</code>: SINDBAD NT input to the spinup of TEM during which subfield(s) of pools are overwritten</p></li><li><p><code>spinup_pool_name</code>: name of the land.pool storage component intended for spinup</p></li><li><p><code>tem_info</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.precomputeTEM-Tuple{LongTuple, Any, Any, Any}" href="#SindbadTEM.precomputeTEM-Tuple{LongTuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.precomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">precomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the precompute function of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any, DoDebugModel}" href="#SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any, DoDebugModel}"><span class="jlbinding">SindbadTEM.precomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">precomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>debug the precompute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>::DoDebugModel</code>: a type dispatch to debug the compute functions of model</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any, DoNotDebugModel}" href="#SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any, DoNotDebugModel}"><span class="jlbinding">SindbadTEM.precomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">precomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>run the precompute function of SINDBAD models</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>::DoNotDebugModel</code>: a type dispatch to not debug but run the compute functions of model</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any}" href="#SindbadTEM.precomputeTEM-Tuple{Tuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.precomputeTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">precomputeTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the precompute function of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.prepTEM" href="#SindbadTEM.prepTEM"><span class="jlbinding">SindbadTEM.prepTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, observations</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Prepares the SINDBAD Terrestrial Ecosystem Model (TEM) for execution by setting up the necessary inputs, outputs, and configurations with different variants for different experimental setups.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>forcing::NamedTuple</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>observations::NamedTuple</code>: A NamedTuple containing observational data for model validation.</p></li><li><p><code>info::NamedTuple</code>: A nested NamedTuple containing necessary information, including:</p><ul><li><p>Helpers for running the model.</p></li><li><p>Model configurations.</p></li><li><p>Spinup settings.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>run_helpers</code>: A NamedTuple containing preallocated data and configurations required to run the TEM, including: <ul><li><p>Spatial forcing data.</p></li><li><p>Spinup forcing data.</p></li><li><p>Output arrays.</p></li><li><p>Land variables.</p></li><li><p>Temporal and spatial indices.</p></li><li><p>Model and helper configurations.</p></li></ul></li></ul><p><strong>Notes:</strong></p><ul><li><p>The function dynamically prepares the required data structures based on the specified <code>PreAllocputType</code> in <code>info.helpers.run.land_output_type</code>.</p></li><li><p>It handles spatial and temporal data preparation, including filtering NaN pixels, initializing land variables, and setting up forcing and output arrays.</p></li><li><p>This function is a key step in preparing the SINDBAD TEM for execution.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Preparing TEM with observations</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">selected_models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (model1, model2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">observations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, spinup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, observations, info)</span></span></code></pre></div><ol><li><strong>Preparing TEM without observations</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">selected_models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (model1, model2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, models </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, spinup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, info)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.prepTEMOut-Tuple{NamedTuple, NamedTuple}" href="#SindbadTEM.prepTEMOut-Tuple{NamedTuple, NamedTuple}"><span class="jlbinding">SindbadTEM.prepTEMOut</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepTEMOut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing_helpers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Prepares the output NamedTuple required for running the Terrestrial Ecosystem Model (TEM) in SINDBAD.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>forcing_helpers</code>: A NamedTuple with information on forcing sizes and dimensions.</p></li></ul><p><strong>Returns:</strong></p><p>A NamedTuple <code>output_tuple</code> containing:</p><ul><li><p><code>land_init</code>: The initial land state from <code>info.land_init</code>.</p></li><li><p><code>dims</code>: A vector of output dimensions, where each dimension is represented as a tuple of <code>Dim</code> objects.</p></li><li><p><code>data</code>: A vector of numeric arrays initialized for output variables.</p></li><li><p><code>variables</code>: A list of output variable names.</p></li><li><p>Additional fields for optimization output if optimization is enabled.</p></li></ul><p><strong>Notes:</strong></p><ul><li><p>The function initializes the output dimensions and data arrays based on the specified array backend (<code>info.helpers.run.output_array_type</code>).</p></li><li><p>If optimization is enabled (<code>info.helpers.run.run_optimization</code>), additional fields for optimized parameters are added to the output.</p></li><li><p>The function uses helper functions like <code>getOutDimsArrays</code> and <code>setupOptiOutput</code> to prepare the output.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Basic usage</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output_tuple </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prepTEMOut</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_helpers)</span></span></code></pre></div><ol><li><strong>Accessing output fields</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dims </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> output_tuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dims</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> output_tuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> output_tuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">variables</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.runTEM" href="#SindbadTEM.runTEM"><span class="jlbinding">SindbadTEM.runTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, loc_spinup_forcing, loc_forcing_t, loc_land</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tem_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, loc_forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, loc_spinup_forcing, loc_forcing_t, land_time_series, loc_land</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tem_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Runs the SINDBAD Terrestrial Ecosystem Model (TEM) for a single location, with or without spinup, based on the provided configurations. The two main variants are the ones with and without the preallocated land time series. The shorthand version with two input arguments calls the one without preallocated land time series.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>forcing::NamedTuple</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>loc_spinup_forcing</code>: A forcing NamedTuple for spinup, used to initialize the model to a steady state.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>loc_land::NamedTuple</code>: Initial SINDBAD land NamedTuple with all fields and subfields.</p></li><li><p><code>tem_info::NamedTuple</code>: A nested NamedTuple containing necessary information, including:</p><ul><li><p>Model helpers.</p></li><li><p>Spinup configurations.</p></li><li><p>Debugging options.</p></li><li><p>Output configurations.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>LandWrapper</code>: A wrapper containing the time series of SINDBAD land states for each time step after the model simulation.</li></ul><p><strong>Notes:</strong></p><ul><li><p>The function internally calls <code>coreTEM</code> to handle the main simulation logic.</p></li><li><p>If spinup is enabled (<code>DoSpinupTEM</code>), the function runs the spinup process before the main simulation.</p></li><li><p>If spinup is disabled (<code>DoNotSpinupTEM</code>), the function directly runs the main simulation.</p></li><li><p>The function prepares the necessary inputs and configurations using <code>prepTEM</code> before executing the simulation.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Running TEM with spinup</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land_time_series </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, loc_spinup_forcing, loc_forcing_t, loc_land, tem_info)</span></span></code></pre></div><ol><li><strong>Running TEM without spinup</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land_time_series </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, loc_forcing_t, loc_land, tem_info)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.runTEM!" href="#SindbadTEM.runTEM!"><span class="jlbinding">SindbadTEM.runTEM!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, space_forcing, space_spinup_forcing, loc_forcing_t, space_output, space_land, tem_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Runs the SINDBAD Terrestrial Ecosystem Model (TEM) for all locations and time steps using preallocated arrays as the model data backend. This function supports multiple configurations for efficient execution.</p><p><strong>Arguments:</strong></p><ol><li><strong>For the first variant</strong>:</li></ol><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>forcing::NamedTuple</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>info::NamedTuple</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li></ul><ol start="2"><li><strong>For the second variant</strong>:</li></ol><ul><li><p><code>forcing::NamedTuple</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>info::NamedTuple</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li></ul><ol start="3"><li><strong>For the third variant</strong>:</li></ol><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>space_forcing</code>: A collection of forcing NamedTuples for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>space_spinup_forcing</code>: A collection of spinup forcing NamedTuples for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>space_output</code>: A collection of output arrays/views for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>space_land</code>: A collection of initial SINDBAD land NamedTuples for multiple locations, ensuring that the model states for one location do not overwrite those of another.</p></li><li><p><code>tem_info::NamedTuple</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>output_array</code>: A preallocated array containing the simulation results for all locations and time steps.</li></ul><p><strong>Notes:</strong></p><ul><li><p><strong>Precomputations</strong>:</p><ul><li>The function uses <code>prepTEM</code> to prepare the necessary inputs and configurations for the simulation.</li></ul></li><li><p><strong>Parallel Execution</strong>:</p><ul><li>The function uses <code>parallelizeTEM!</code> to distribute the simulation across multiple locations using the specified parallelization backend (<code>Threads.@threads</code> or <code>qbmap</code>).</li></ul></li><li><p><strong>Core Execution</strong>:</p><ul><li>For each location, the function calls <code>coreTEM!</code> to execute the TEM simulation, including spinup (if enabled) and the main time loop.</li></ul></li><li><p><strong>Data Safety</strong>:</p><ul><li>The function ensures data safety by replicating forcing, output, and land data for each location, avoiding data races during parallel execution.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Running TEM with preallocated arrays</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, info)</span></span></code></pre></div><ol><li><strong>Running TEM with parallelization</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output_array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, info)</span></span></code></pre></div><ol><li><strong>Running TEM with precomputed helpers</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, space_forcing, space_spinup_forcing, loc_forcing_t, space_output, space_land, tem_info)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.runTEMYax-Tuple{Tuple, NamedTuple, NamedTuple}" href="#SindbadTEM.runTEMYax-Tuple{Tuple, NamedTuple, NamedTuple}"><span class="jlbinding">SindbadTEM.runTEMYax</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEMYax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, selected_models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; max_cache </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0e9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>output</code>: an output NT including the data arrays, as well as information of variables and dimensions</p></li><li><p><code>tem</code>: a nested NT with necessary information of helpers, models, and spinup needed to run SINDBAD TEM and models</p></li><li><p><code>selected_models</code>: a tuple of all models selected in the given model structure</p></li><li><p><code>max_cache</code>: cache size to use for mapCube</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.setOutputForTimeStep!-Union{Tuple{output_vars}, Tuple{Any, Any, Any, Val{output_vars}}} where output_vars" href="#SindbadTEM.setOutputForTimeStep!-Union{Tuple{output_vars}, Tuple{Any, Any, Any, Val{output_vars}}} where output_vars"><span class="jlbinding">SindbadTEM.setOutputForTimeStep!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setOutputForTimeStep!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(outputs, land, ts, Val{output_vars})</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>outputs</code>: vector of model output vectors</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>ts</code>: time step</p></li><li><p><code>::Val{output_vars}</code>: a dispatch for vals of the output variables to generate the function</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.setSequence-Tuple{Any, Any}" href="#SindbadTEM.setSequence-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.setSequence</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setSequence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_info, new_sequence)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>tem_info</code>: Tuple with the field <code>spinup_sequence</code></p></li><li><p><code>new_sequence</code></p></li></ul><p><strong>Outputs</strong></p><ul><li>an updated tem_info object with new spinup sequence modes</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.setupOptiOutput" href="#SindbadTEM.setupOptiOutput"><span class="jlbinding">SindbadTEM.setupOptiOutput</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setupOptiOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoRunOptimization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotRunOptimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>Creates the output fields needed for the optimization experiment.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>output</code>: A base output NamedTuple to which optimization-specific fields will be added.</p></li><li><p><code>::DoRunOptimization</code>: (Optional) A type dispatch indicating that optimization is enabled. Adds fields for optimized parameters.</p></li><li><p><code>::DoNotRunOptimization</code>: (Optional) A type dispatch indicating that optimization is not enabled. Returns the base output unchanged.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A NamedTuple containing the base output fields, with additional fields for optimization if enabled.</li></ul><p><strong>Notes:</strong></p><ul><li><p>When optimization is enabled, the function:</p><ul><li><p>Adds a <code>parameter_dim</code> field to the output, which includes the parameter dimension and metadata.</p></li><li><p>Creates an <code>OutDims</code> object for storing optimized parameters, with the appropriate backend and file path.</p></li></ul></li><li><p>When optimization is not enabled, the function simply returns the input <code>output</code> NamedTuple unchanged.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>With optimization enabled</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setupOptiOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, output, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoRunOptimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Without optimization</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setupOptiOutput</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, output, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotRunOptimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.spinup" href="#SindbadTEM.spinup"><span class="jlbinding">SindbadTEM.spinup</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps, spinup_mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpinupMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Runs the spinup process for the SINDBAD Terrestrial Ecosystem Model (TEM) to initialize the model to a steady state. The spinup process updates the state variables (e.g., pools) using various spinup methods.</p><p><strong>Arguments:</strong></p><ul><li><p><code>spinup_models</code>: A tuple of a subset of all models in the given model structure that are selected for spinup.</p></li><li><p><code>spinup_forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for the spinup process.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>land</code>: A SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every timestep.</p></li><li><p><code>tem_info</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li><li><p><code>n_timesteps</code>: The number of timesteps for the spinup process.</p></li><li><p><code>spinup_mode::SpinupMode</code>: A type dispatch that determines the spinup method to be used.</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>land</code>: The updated SINDBAD NamedTuple containing the final state of the model after the spinup process.</li></ul><p><strong>SpinupMode</strong></p><p>Abstract type for model spinup modes in SINDBAD</p><p><strong>Available methods/subtypes:</strong></p><ul><li><p><code>AllForwardModels</code>: Use all forward models for spinup</p></li><li><p><code>EtaScaleA0H</code>: scale carbon pools using diagnostic scalars for ηH and c_remain</p></li><li><p><code>EtaScaleA0HCWD</code>: scale carbon pools of CWD (cLitSlow) using ηH and set vegetation pools to c_remain</p></li><li><p><code>EtaScaleAH</code>: scale carbon pools using diagnostic scalars for ηH and ηA</p></li><li><p><code>EtaScaleAHCWD</code>: scale carbon pools of CWD (cLitSlow) using ηH and scale vegetation pools by ηA</p></li><li><p><code>NlsolveFixedpointTrustregionCEco</code>: use a fixed-point nonlinear solver with trust region for carbon pools (cEco)</p></li><li><p><code>NlsolveFixedpointTrustregionCEcoTWS</code>: use a fixed-point nonlinear solver with trust region for both cEco and TWS</p></li><li><p><code>NlsolveFixedpointTrustregionTWS</code>: use a fixed-point nonlinearsolver with trust region for Total Water Storage (TWS)</p></li><li><p><code>ODEAutoTsit5Rodas5</code>: use the AutoVern7(Rodas5) method from DifferentialEquations.jl for solving ODEs</p></li><li><p><code>ODEDP5</code>: use the DP5 method from DifferentialEquations.jl for solving ODEs</p></li><li><p><code>ODETsit5</code>: use the Tsit5 method from DifferentialEquations.jl for solving ODEs</p></li><li><p><code>SSPDynamicSSTsit5</code>: use the SteadyState solver with DynamicSS and Tsit5 methods</p></li><li><p><code>SSPSSRootfind</code>: use the SteadyState solver with SSRootfind method</p></li><li><p><code>SelSpinupModels</code>: run only the models selected for spinup in the model structure</p></li><li><p><code>Spinup_TWS</code>: Spinup spinup_mode for Total Water Storage (TWS)</p></li><li><p><code>Spinup_cEco</code>: Spinup spinup_mode for cEco</p></li><li><p><code>Spinup_cEco_TWS</code>: Spinup spinup_mode for cEco and TWS</p></li></ul><hr><p><strong>Extended help</strong></p><p><strong>Notes:</strong></p><ul><li><p>The spinup process can use different methods depending on the <code>spinup_mode</code>, including fixed-point solvers, ODE solvers, and steady-state solvers.</p></li><li><p>The function dynamically selects the appropriate spinup method based on the <code>spinup_mode</code> dispatch type.</p></li><li><p>For ODE-based methods, the function uses DifferentialEquations.jl to solve the spinup equations.</p></li><li><p>For steady-state solvers, the function uses methods like <code>DynamicSS</code> or <code>SSRootfind</code> to find equilibrium states.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Running spinup with selected models</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> spinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SelSpinupModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Running spinup with ODE solver (Tsit5)</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> spinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ODETsit5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Running spinup with fixed-point solver for cEco and TWS</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> spinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NlsolveFixedpointTrustregionCEcoTWS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Running spinup with steady-state solver (SSRootfind)</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> spinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SSPSSRootfind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.spinupTEM" href="#SindbadTEM.spinupTEM"><span class="jlbinding">SindbadTEM.spinupTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spinupTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, loc_forcing_t, land, tem_info, spinup_mode)</span></span></code></pre></div><p>The main spinup function that handles the spinup method based on inputs from spinup.json. Either the spinup is loaded or/and run using spinup functions for different spinup methods.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: a tuple of all models selected in the given model structure</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>loc_forcing_t</code>: a forcing NT for a single location and a single time step</p></li><li><p><code>land</code>: SINDBAD NT input to the spinup of TEM during which subfield(s) of pools are overwritten</p></li><li><p><code>tem_info</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>tem_spinup</code>: a NT with information/instruction on spinning up the TEM</p></li><li><p><code>spinup_mode</code>: A type dispatch that determines whether spinup is included or excluded:</p><ul><li><p><code>::DoSpinupTEM</code>: Runs the spinup process before the main simulation. Set <code>spinup_TEM</code> to <code>true</code> in the flag section of experiment_json.</p></li><li><p><code>::DoNotSpinupTEM</code>: Skips the spinup process and directly runs the main simulation. Set <code>spinup_TEM</code> to <code>false</code> in the flag section of experiment_json.</p></li></ul></li></ul><p><strong>Notes:</strong></p><ul><li><p>When <code>DoSpinupTEM</code> is used:</p><ul><li>The function runs the spinup sequences</li></ul></li><li><p>When <code>DoNotSpinupTEM</code> is used:</p><ul><li>The function skips the spinup process returns the land as is`</li></ul></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.timeLoopTEMSpinup-NTuple{6, Any}" href="#SindbadTEM.timeLoopTEMSpinup-NTuple{6, Any}"><span class="jlbinding">SindbadTEM.timeLoopTEMSpinup</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEMSpinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, spinup_forcing, loc_forcing_t, land, tem_info, n_timesteps)</span></span></code></pre></div><p>do/run the time loop of the spinup models to update the pool. Note that, in this function, the time series is not stored and the land/land is overwritten with every iteration. Only the state at the end is returned</p><p><strong>Arguments:</strong></p><ul><li><p><code>spinup_models</code>: a tuple of a subset of all models in the given model structure that is selected for spinup</p></li><li><p><code>spinup_forcing</code>: a selected/sliced/computed forcing time series for running the spinup sequence for a location</p></li><li><p><code>loc_forcing_t</code>: a forcing NT for a single location and a single time step</p></li><li><p><code>land</code>: SINDBAD NT input to the spinup of TEM during which subfield(s) of pools are overwritten</p></li><li><p><code>tem_info</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>n_timesteps</code>: number of time steps</p></li></ul></details><h2 id="Internal" tabindex="-1">Internal <a class="header-anchor" href="#Internal" aria-label="Permalink to &quot;Internal {#Internal}&quot;">​</a></h2><details class="jldocstring custom-block" open><summary><a id="Sindbad.Types.Spinup_TWS-Tuple{Any, Any}" href="#Sindbad.Types.Spinup_TWS-Tuple{Any, Any}"><span class="jlbinding">Sindbad.Types.Spinup_TWS</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TWS_spin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Spinup_TWS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(pout, p)</span></span></code></pre></div><p>Custom callable type function for spinning up TWS pools.</p><p><strong>Arguments</strong></p><ul><li><p><code>pout</code>: Output pools</p></li><li><p><code>p</code>: Input pools</p></li></ul><p><strong>Note</strong></p><p>This method allows a <code>Spinup_TWS</code> object to be called as a function, implementing the specific spinup logic for the terrestrial water storage components.</p></details><details class="jldocstring custom-block" open><summary><a id="Sindbad.Types.Spinup_cEco-Tuple{Any, Any}" href="#Sindbad.Types.Spinup_cEco-Tuple{Any, Any}"><span class="jlbinding">Sindbad.Types.Spinup_cEco</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cEco_spin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Spinup_cEco</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(pout, p)</span></span></code></pre></div><p>Custom callable type function for spinning up cEco.</p><p><strong>Arguments</strong></p><ul><li><p><code>pout</code>: Output pools</p></li><li><p><code>p</code>: Input pools</p></li></ul><p><strong>Note</strong></p><p>This method allows a <code>Spinup_cEco</code> object to be called as a function, implementing the specific spinup logic for ecosystem carbon pools.</p></details><details class="jldocstring custom-block" open><summary><a id="Sindbad.Types.Spinup_cEco_TWS-Tuple{Any, Any}" href="#Sindbad.Types.Spinup_cEco_TWS-Tuple{Any, Any}"><span class="jlbinding">Sindbad.Types.Spinup_cEco_TWS</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cEco_TWS_spin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Spinup_cEco_TWS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(pout, p)</span></span></code></pre></div><p>Custom callable type function for spinning up cEco and TWS pools.</p><p><strong>Arguments</strong></p><ul><li><p><code>pout</code>: Output pools</p></li><li><p><code>p</code>: Input pools</p></li></ul><p><strong>Note</strong></p><p>This method allows a <code>Spinup_cEco_TWS</code> object to be called as a function, implementing the specific spinup logic for ecosystem carbon pools and the terrestrial water storage components.</p></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.addErrorCatcher" href="#SindbadTEM.addErrorCatcher"><span class="jlbinding">SindbadTEM.addErrorCatcher</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addErrorCatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, debug_mode)</span></span></code></pre></div><p>Adds an error catcher to monitor and debug the SINDBAD land variables during model execution.</p><p><strong>Arguments:</strong></p><ul><li><p><code>loc_land</code>: A core SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every time step.</p></li><li><p><code>debug_mode</code>: A type dispatch to determine whether debugging is enabled:</p><ul><li><p><code>DoDebugModel</code>: Enables debugging and adds <code>loc_land</code> to the error catcher. Set <code>debug_model</code> to true in flag section of experiment_json.</p></li><li><p><code>DoNotDebugModel</code>: Disables debugging and does nothing. Set <code>debug_model</code> to false in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>nothing</code>: The function modifies global state or performs debugging actions but does not return a value.</li></ul><p><strong>Notes:</strong></p><ul><li><p>When <code>debug_mode</code> is <code>DoDebugModel</code>, the function:</p><ul><li><p>Initializes an error catcher if it does not already exist. This error_catcher is a global variable where you can add any variable from within SINDBAD while debugging, and this variable will be available during an experiment run REPL session.</p></li><li><p>Pushes the current <code>loc_land</code> to the error catcher for debugging purposes.</p></li><li><p>Prints the <code>loc_land</code> for inspection using <code>tcPrint</code>.</p></li></ul></li><li><p>When <code>debug_mode</code> is <code>DoNotDebugModel</code>, the function performs no actions.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Enabling debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (temperature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, precipitation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addErrorCatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Disabling debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (temperature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, precipitation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addErrorCatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.addSpinupLog" href="#SindbadTEM.addSpinupLog"><span class="jlbinding">SindbadTEM.addSpinupLog</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">addSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, sequence, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpinupLogType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Adds or skips the preallocated holder for storing the spinup log during model spinup, depending on the specified <code>SpinupLogType</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>loc_land</code>: A core SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every time step.</p></li><li><p><code>sequence</code>: The spinup sequence, which defines the number of repeats and timesteps for the spinup process.</p></li><li><p><code>::SpinupLogType</code>: A type dispatch that determines whether to store the spinup log:</p><ul><li><p><code>DoStoreSpinup</code>: Enables storing the spinup log for each repeat of the spinup process. Set <code>store_spinup</code> to true in flag section of experiment_json.</p></li><li><p><code>DoNotStoreSpinup</code>: Skips storing the spinup log. Set <code>store_spinup</code> to false in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>loc_land</code>: The updated <code>loc_land</code> NamedTuple, potentially with the spinup log added.</li></ul><p><strong>Notes:</strong></p><ul><li><p>When <code>DoStoreSpinup</code> is used:</p><ul><li><p>The function calculates the total number of repeats in the spinup sequence.</p></li><li><p>Preallocates a vector to store the spinup log for each repeat.</p></li><li><p>Updates the <code>loc_land</code> NamedTuple with the spinup log.</p></li></ul></li><li><p>When <code>DoNotStoreSpinup</code> is used, the function simply returns <code>loc_land</code> without modifications.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Storing the spinup log</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), states </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequence </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [(n_repeat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_timesteps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (n_repeat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_timesteps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, sequence, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoStoreSpinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Skipping the spinup log</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), states </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequence </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [(n_repeat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_timesteps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (n_repeat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_timesteps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(loc_land, sequence, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotStoreSpinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.collectMetadata-Tuple{Any, Any}" href="#SindbadTEM.collectMetadata-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.collectMetadata</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">collectMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, vname)</span></span></code></pre></div><p>Collects metadata for a specific output variable in the SINDBAD experiment.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>vname</code>: A tuple of symbols representing the variable name, e.g., <code>(:diagnostics, :water_balance)</code>.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A dictionary <code>Dict{String, Any}</code> containing metadata for the specified variable, including: <ul><li><p>Metadata from the variable catalog (if available).</p></li><li><p>Global metadata about the platform from <code>info.output.file_info.global_metadata</code>.</p></li></ul></li></ul><p><strong>Notes:</strong></p><ul><li><p>If the variable is not found in the catalog, a warning is issued, and the metadata dictionary will not include catalog-specific information.</p></li><li><p>The metadata includes platform information for every output variable. For datasets, this should ideally be added once, not for every variable.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Collecting metadata for a variable</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">metadata </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> collectMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:diagnostics</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:water_balance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><ol><li><strong>Accessing specific metadata fields</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">platform_info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;platform_info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">variable_units </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> metadata[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;units&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>Warnings:</strong></p><ul><li>If the variable is not found in the catalog, a warning is logged.</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.coreTEMYax-NTuple{4, Any}" href="#SindbadTEM.coreTEMYax-NTuple{4, Any}"><span class="jlbinding">SindbadTEM.coreTEMYax</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">coreTEMYax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, loc_land, tem_info, tem_spinup, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoSpinupTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>run the SINBAD CORETEM for a given location</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: a tuple of all models selected in the given model structure</p></li><li><p><code>loc_forcing</code>: a forcing NT that contains the forcing time series set for one location</p></li><li><p><code>loc_land</code>: initial SINDBAD land with all fields and subfields</p></li><li><p><code>tem_info</code>: helper NT with necessary objects for model run and type consistencies</p></li><li><p><code>tem_spinup</code>: a NT with information/instruction on spinning up the TEM</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.defineTEM-Tuple{LongTuple, Any, Any, Any}" href="#SindbadTEM.defineTEM-Tuple{LongTuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.defineTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defineTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LongTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing, land, model_helpers)</span></span></code></pre></div><p>run the precompute function of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.defineTEM-Tuple{Tuple, Any, Any, Any}" href="#SindbadTEM.defineTEM-Tuple{Tuple, Any, Any, Any}"><span class="jlbinding">SindbadTEM.defineTEM</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defineTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, forcing, land, model_helpers)</span></span></code></pre></div><p>run the define and precompute functions of SINDBAD models to instantiate all fields of land</p><p><strong>Arguments:</strong></p><ul><li><p><code>models</code>: a list of SINDBAD models to run</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li><li><p><code>land</code>: a core SINDBAD NT that contains all variables for a given time step that is overwritten at every timestep</p></li><li><p><code>model_helpers</code>: helper NT with necessary objects for model run and type consistencies</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.fillLocOutput!-Union{Tuple{T2}, Tuple{T1}, Tuple{T}, Tuple{T, T1, T2}} where {T, T1, T2&lt;:Int64}" href="#SindbadTEM.fillLocOutput!-Union{Tuple{T2}, Tuple{T1}, Tuple{T}, Tuple{T, T1, T2}} where {T, T1, T2&lt;:Int64}"><span class="jlbinding">SindbadTEM.fillLocOutput!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fillLocOutput!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {T, T1, T2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Fill an array <code>ar</code> with value <code>val</code> at specific time step <code>ts</code>. Generic function that works with different array and value types, where the time step must be an integer.</p><p><strong>Arguments</strong></p><ul><li><p><code>ar::T</code>: Target array to be filled</p></li><li><p><code>val::T1</code>: Value to fill into the array</p></li><li><p><code>ts::T2&lt;:Int</code>: Time step indicating position to fill</p></li></ul><p><strong>Notes</strong></p><ul><li><p>Modifies the input array <code>ar</code> in-place</p></li><li><p>Time step <code>ts</code> must be an integer type</p></li></ul><p><strong>Returns</strong></p><p>Nothing, modifies input array in-place</p></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.fillOutputYax-Tuple{Any, Any}" href="#SindbadTEM.fillOutputYax-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.fillOutputYax</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fillOutputYax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xout, xin)</span></span></code></pre></div><p>fills the output array position with the input data/vector</p><p><strong>Arguments:</strong></p><ul><li><p><code>xout</code>: output array location</p></li><li><p><code>xin</code>: input data/vector</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.filterNanPixels" href="#SindbadTEM.filterNanPixels"><span class="jlbinding">SindbadTEM.filterNanPixels</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">filterNanPixels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_space_maps, filter_nan_pixels_mode)</span></span></code></pre></div><p>Filters out spatial pixels where all timesteps contain NaN values, based on the specified filtering mode.</p><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>loc_space_maps</code>: A collection of local spatial coordinates for all input points.</p></li><li><p><code>filter_nan_pixels_mode</code>: A type dispatch that determines whether to filter NaN-only pixels:</p><ul><li><p><code>DoFilterNanPixels</code>: Filters out pixels where all timesteps are NaN. Set <code>filter_nan_pixels</code> to true in flag section of experiment_json.</p></li><li><p><code>DoNotFilterNanPixels</code>: Does not filter any pixels, returning the input <code>loc_space_maps</code> unchanged. Set <code>filter_nan_pixels</code> to false in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>loc_space_maps</code>: The filtered or unfiltered spatial coordinates, depending on the filtering mode.</li></ul><p><strong>Notes:</strong></p><ul><li><p>When <code>DoFilterNanPixels</code> is used:</p><ul><li><p>The function iterates through all spatial locations and checks if all timesteps for a given location are NaN. NOTE THAT THIS WILL BE SLOW FOR LARGE DATASETS AS ALL LAZILY-LOADED DATA ARE STORED IN MEMORY.</p></li><li><p>Locations with all NaN values are excluded from the returned <code>loc_space_maps</code>.</p></li></ul></li><li><p>When <code>DoNotFilterNanPixels</code> is used, the function simply returns the input <code>loc_space_maps</code> without any modifications.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Filtering NaN-only pixels</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_space_maps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filtered_maps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filterNanPixels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_space_maps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoFilterNanPixels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Skipping NaN filtering</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, variables </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">loc_space_maps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filtered_maps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filterNanPixels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_space_maps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotFilterNanPixels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getForcingV" href="#SindbadTEM.getForcingV"><span class="jlbinding">SindbadTEM.getForcingV</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getForcingV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v, ts, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ForcingTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Retrieves forcing values for a specific time step or returns constant forcing values, depending on the forcing type.</p><p><strong>Arguments:</strong></p><ul><li><p><code>v</code>: The input forcing data. Can be time-dependent or constant.</p></li><li><p><code>ts</code>: The time step (integer) for which the forcing value is retrieved. Ignored for constant forcing types.</p></li><li><p><code>&lt;: ForcingTime</code>: The type of forcing, which determines how the value is retrieved:</p><ul><li><p><code>ForcingWithTime</code>: Retrieves the forcing value for the specified time step <code>ts</code>.</p></li><li><p><code>ForcingWithoutTime</code>: Returns the constant forcing value, ignoring <code>ts</code>.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li>The forcing value for the specified time step (if time-dependent) or the constant forcing value.</li></ul><p><strong>Extended help</strong></p><p><strong>Examples:</strong></p><ol><li><strong>Time-dependent forcing</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Forcing values for time steps</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # Time step</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getForcingV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, ts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ForcingWithTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># value = 2.0</span></span></code></pre></div><ol><li><strong>Constant forcing</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Constant forcing value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # Time step (ignored)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getForcingV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, ts, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ForcingWithoutTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># value = 5.0</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getLocArrayView" href="#SindbadTEM.getLocArrayView"><span class="jlbinding">SindbadTEM.getLocArrayView</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getLocArrayView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ar, val, ts)</span></span></code></pre></div><p>Creates a view of the input array <code>ar</code> for a specific time step <code>ts</code>, based on the type of <code>val</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>ar</code>: The input array from which a view is created.</p></li><li><p><code>val</code>: The value or vector used to determine the size or structure of the view.</p><ul><li><p>If <code>val</code> is an <code>AbstractVector</code>, the view spans the time step <code>ts</code> and the size of <code>val</code>.</p></li><li><p>If <code>val</code> is a <code>Real</code> value, the view spans only the time step <code>ts</code>.</p></li></ul></li><li><p><code>ts</code>: The time step (integer) for which the view is created.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A view of the array <code>ar</code> corresponding to the specified time step <code>ts</code>.</li></ul><p><strong>Notes:</strong></p><ul><li><p>The function dynamically adjusts the view based on whether <code>val</code> is a vector or a scalar.</p></li><li><p>This is useful for efficiently accessing or modifying specific slices of the array without copying data.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Creating a view with a vector <code>val</code></strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># A 10x5 array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># A vector of size 5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Time step</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">view_ar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getLocArrayView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ar, val, ts)</span></span></code></pre></div><ol><li><strong>Creating a view with a scalar <code>val</code></strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># A 1D array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # A scalar value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Time step</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">view_ar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getLocArrayView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ar, val, ts)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getNumericArrays-Tuple{Any, Any}" href="#SindbadTEM.getNumericArrays-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.getNumericArrays</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getNumericArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_sizes)</span></span></code></pre></div><p>Defines and instantiates numeric arrays for SINDBAD output variables.</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: A SINDBAD NamedTuple containing all information needed for setup and execution of an experiment.</p></li><li><p><code>forcing_sizes</code>: A NamedTuple with forcing dimensions and their sizes.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A vector of numeric arrays initialized with <code>NaN</code> values, where each array corresponds to an output variable.</li></ul><p><strong>Notes:</strong></p><ul><li><p>The arrays are created with dimensions based on the forcing sizes and the depth information of the output variables.</p></li><li><p>The numeric type of the arrays is determined by the model settings (<code>info.helpers.numbers.num_type</code>).</p></li><li><p>If forward differentiation is enabled (<code>info.helpers.run.use_forward_diff</code>), the array type is adjusted accordingly.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Creating numeric arrays for output variables</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing_sizes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lon</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numeric_arrays </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getNumericArrays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing_sizes)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getOutArrayType" href="#SindbadTEM.getOutArrayType"><span class="jlbinding">SindbadTEM.getOutArrayType</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getOutArrayType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num_type, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoUseForwardDiff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotUseForwardDiff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Determines the type of elements to be used in the output array based on whether forward differentiation is enabled.</p><p><strong>Arguments:</strong></p><ul><li><p><code>num_type</code>: The numeric type specified in the model settings (e.g., <code>Float64</code>).</p></li><li><p><code>::DoUseForwardDiff</code>: A type dispatch indicating that forward differentiation is enabled. Returns a generic type (<code>Real</code>) to support differentiation.</p></li><li><p><code>::DoNotUseForwardDiff</code>: A type dispatch indicating that forward differentiation is not enabled. Returns the specified numeric type (<code>num_type</code>).</p></li></ul><p><strong>Returns:</strong></p><ul><li>The type of elements to be used in the output array: <ul><li><p><code>Real</code> if forward differentiation is enabled.</p></li><li><p><code>num_type</code> if forward differentiation is not enabled.</p></li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Forward differentiation enabled</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">num_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">array_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutArrayType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num_type, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoUseForwardDiff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># array_type = Real</span></span></code></pre></div><ol><li><strong>Forward differentiation not enabled</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">num_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">array_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutArrayType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num_type, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotUseForwardDiff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># array_type = Float64</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getOutDimsPairs-Tuple{Any, Any}" href="#SindbadTEM.getOutDimsPairs-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.getOutDimsPairs</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getOutDimsPairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_output, forcing_helpers; dthres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Creates dimension pairs for each output variable based on forcing dimensions and depth information.</p><p><strong>Arguments:</strong></p><ul><li><p><code>tem_output</code>: A NamedTuple containing information about output variables and depth dimensions of output arrays.</p></li><li><p><code>forcing_helpers</code>: A NamedTuple with information on forcing sizes, dimensions, and optional permutations.</p></li><li><p><code>dthres</code>: (Optional) A threshold for the number of depth layers to define depth as a new dimension. Defaults to <code>1</code>.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A vector of tuples, where each tuple contains dimension pairs for an output variable. Each dimension pair is represented as a <code>Pair</code> of a dimension name and its corresponding range or size.</li></ul><p><strong>Notes:</strong></p><ul><li><p>If <code>forcing_helpers.dimensions.permute</code> is provided, the function reorders dimensions based on the permutation.</p></li><li><p>Depth dimensions are included if their size exceeds the threshold <code>dthres</code>. If the depth size is <code>1</code>, the depth dimension is labeled as <code>&quot;idx&quot;</code>.</p></li><li><p>The function processes each output variable independently, combining forcing dimensions and depth information.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Basic usage</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tem_output </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:var1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:var2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], depth_info</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;depth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;depth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (axes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)], dimensions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(permute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims_pairs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsPairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_output, forcing_helpers)</span></span></code></pre></div><ol><li><strong>With dimension permutation</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">forcing_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (axes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:lon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)], dimensions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(permute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims_pairs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsPairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_output, forcing_helpers)</span></span></code></pre></div><ol><li><strong>With depth threshold</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">outdims_pairs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getOutDimsPairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_output, forcing_helpers; dthres</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getRunTEMInfo-Tuple{Any, Any}" href="#SindbadTEM.getRunTEMInfo-Tuple{Any, Any}"><span class="jlbinding">SindbadTEM.getRunTEMInfo</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getRunTEMInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(info, forcing)</span></span></code></pre></div><p>a helper to condense the useful info only for the inner model runs</p><p><strong>Arguments:</strong></p><ul><li><p><code>info</code>: a nested NT with necessary information of helpers, models, and spinup needed to run SINDBAD TEM and models</p></li><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for ALL locations</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpinupForcing-Union{Tuple{forcing_types}, Tuple{Any, SpinupSequenceWithAggregator, Val{forcing_types}}} where forcing_types" href="#SindbadTEM.getSpinupForcing-Union{Tuple{forcing_types}, Tuple{Any, SpinupSequenceWithAggregator, Val{forcing_types}}} where forcing_types"><span class="jlbinding">SindbadTEM.getSpinupForcing</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupForcing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, sequence, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Val{forcing_types}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>prepare the spinup forcing set for a given spinup sequence</p><p><strong>Arguments:</strong></p><ul><li><p><code>forcing</code>: a forcing NT that contains the forcing time series set for a location</p></li><li><p><code>sequence</code>: a with all information needed to run a spinup sequence</p></li><li><p><code>:Val{forcing_types}</code>: a type dispatch with the tuple of pairs of forcing name and time/no time types</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpinupForcingVariable-Tuple{Any, Any, ForcingWithoutTime}" href="#SindbadTEM.getSpinupForcingVariable-Tuple{Any, Any, ForcingWithoutTime}"><span class="jlbinding">SindbadTEM.getSpinupForcingVariable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupForcingVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v, _, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ForcingWithoutTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>get the spinup forcing variable without time axis</p><p><strong>Arguments:</strong></p><ul><li><p><code>v</code>: a forcing variable</p></li><li><p><code>sequence</code>: a with all information needed to run a spinup sequence</p></li><li><p><code>::ForcingWithoutTime</code>: a type dispatch to indicate that the variable has NO time axis</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpinupForcingVariable-Tuple{Any, SpinupSequenceWithAggregator, ForcingWithTime}" href="#SindbadTEM.getSpinupForcingVariable-Tuple{Any, SpinupSequenceWithAggregator, ForcingWithTime}"><span class="jlbinding">SindbadTEM.getSpinupForcingVariable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupForcingVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v, sequence, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ForcingWithTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>get the aggregated spinup forcing variable</p><p><strong>Arguments:</strong></p><ul><li><p><code>v</code>: a forcing variable</p></li><li><p><code>sequence</code>: a with all information needed to run a spinup sequence</p></li><li><p><code>::ForcingWithTime</code>: a type dispatch to indicate that the variable has a time axis</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.getSpinupTemLite-Tuple{Any}" href="#SindbadTEM.getSpinupTemLite-Tuple{Any}"><span class="jlbinding">SindbadTEM.getSpinupTemLite</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupTemLite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tem_spinup)</span></span></code></pre></div><p>a helper to just get the spinup sequence to pass to inner functions</p><p><strong>Arguments:</strong></p><ul><li><code>tem_spinup_sequence</code>: a NT with all spinup information</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.helpPrepTEM" href="#SindbadTEM.helpPrepTEM"><span class="jlbinding">SindbadTEM.helpPrepTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">helpPrepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, info, forcing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PreAlloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Prepares the necessary information and objects needed to run the SINDBAD Terrestrial Ecosystem Model (TEM).</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>info</code>: A nested NamedTuple containing necessary information, including:</p><ul><li><p>Helpers for running the model.</p></li><li><p>Model configurations.</p></li><li><p>Spinup settings.</p></li></ul></li><li><p><code>forcing::NamedTuple</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>output::NamedTuple</code>: An output NamedTuple containing data arrays, variable information, and dimensions.</p></li><li><p><code>::PreAllocputType</code>: A type dispatch that determines the output preparation strategy.</p></li></ul><p><strong>Returns:</strong></p><ul><li>A NamedTuple (<code>run_helpers</code>) containing preallocated data and configurations required to run the TEM, including: <ul><li><p>Spatial forcing data.</p></li><li><p>Spinup forcing data.</p></li><li><p>Output arrays.</p></li><li><p>Land variables.</p></li><li><p>Temporal and spatial indices.</p></li><li><p>Model and helper configurations.</p></li></ul></li></ul><p><strong>sindbad land output type:</strong></p><p><strong>PreAlloc</strong></p><p>Abstract type for preallocated land helpers types in prepTEM of SINDBAD</p><p><strong>Available methods/subtypes:</strong></p><ul><li><p><code>PreAllocArray</code>: use a preallocated array for model output</p></li><li><p><code>PreAllocArrayAll</code>: use a preallocated array to output all land variables</p></li><li><p><code>PreAllocArrayFD</code>: use a preallocated array for finite difference (FD) hybrid experiments</p></li><li><p><code>PreAllocArrayMT</code>: use arrays of nThreads size for land model output for replicates of multiple threads</p></li><li><p><code>PreAllocStacked</code>: save output as a stacked vector of land using map over temporal dimension</p></li><li><p><code>PreAllocTimeseries</code>: save land output as a preallocated vector for time series of land</p></li><li><p><code>PreAllocYAXArray</code>: use YAX arrays for model output</p></li></ul><hr><p><strong>Extended help</strong></p><p><strong>Notes:</strong></p><ul><li><p>The function dynamically prepares the required data structures based on the specified <code>PreAllocputType</code>.</p></li><li><p>It handles spatial and temporal data preparation, including filtering NaN pixels, initializing land variables, and setting up forcing and output arrays.</p></li><li><p>This function is a key step in preparing the SINDBAD TEM for execution.</p></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Preparing TEM with <code>PreAllocArray</code></strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> helpPrepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, info, forcing, output, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PreAllocArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Preparing TEM with <code>PreAllocTimeseries</code></strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> helpPrepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, info, forcing, output, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PreAllocTimeseries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Preparing TEM with <code>PreAllocArrayFD</code> for FD experiments</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">run_helpers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> helpPrepTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, info, forcing, observations, output, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PreAllocArrayFD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.nrepeatYearsAge-Tuple{Any}" href="#SindbadTEM.nrepeatYearsAge-Tuple{Any}"><span class="jlbinding">SindbadTEM.nrepeatYearsAge</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nrepeatYearsAge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(year_disturbance; year_start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1979</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>year_disturbance</code>: a year date, as an string</p></li><li><p><code>year_start</code>: 1979 [default] start year, as an integer</p></li></ul><p><strong>Outputs</strong></p><ul><li>year difference</li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.nrepeat_age-Tuple{Any}" href="#SindbadTEM.nrepeat_age-Tuple{Any}"><span class="jlbinding">SindbadTEM.nrepeat_age</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nrepeat_age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(year_disturbance; year_start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1979</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>year_disturbance</code>: a year date, as an string</p></li><li><p><code>year_start</code>: 1979 [default] start year, as an integer</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.parallelizeTEM!" href="#SindbadTEM.parallelizeTEM!"><span class="jlbinding">SindbadTEM.parallelizeTEM!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parallelizeTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, space_forcing, space_spinup_forcing, loc_forcing_t, space_output, space_land, tem_info, parallelization_mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SindbadParallelizationMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Parallelizes the SINDBAD Terrestrial Ecosystem Model (TEM) across multiple locations using the specified parallelization backend.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>space_forcing</code>: A collection of forcing NamedTuples for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>space_spinup_forcing</code>: A collection of spinup forcing NamedTuples for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>space_output</code>: A collection of output arrays/views for multiple locations, replicated to avoid data races during parallel execution.</p></li><li><p><code>space_land</code>: A collection of initial SINDBAD land NamedTuples for multiple locations, ensuring that the model states for one location do not overwrite those of another.</p></li><li><p><code>tem_info</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li><li><p><code>parallelization_mode</code>: A type dispatch that determines the parallelization backend to use:</p><ul><li><p><code>ThreadsParallelization</code>: Uses Julia&#39;s <code>Threads.@threads</code> for parallel execution.</p></li><li><p><code>QbmapParallelization</code>: Uses <code>qbmap</code> for parallel execution.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>nothing</code>: The function modifies <code>space_output</code> and <code>space_land</code> in place to store the results for each location.</li></ul><p><strong>Notes:</strong></p><ul><li><p><strong>Thread-based Parallelization</strong>:</p><ul><li>When <code>ThreadsParallelization</code> is used, the function distributes the locations across threads using <code>Threads.@threads</code>.</li></ul></li><li><p><strong>Qbmap-based Parallelization</strong>:</p><ul><li>When <code>QbmapParallelization</code> is used, the function distributes the locations using the <code>qbmap</code> backend.</li></ul></li><li><p><strong>Core Execution</strong>:</p><ul><li>For each location, the function calls <code>coreTEM!</code> to execute the TEM simulation, including spinup (if enabled) and the main time loop.</li></ul></li><li><p><strong>Data Safety</strong>:</p><ul><li>The function ensures data safety by replicating forcing, output, and land data for each location, avoiding data races during parallel execution.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Parallelizing TEM using threads</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parallelizeTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, space_forcing, space_spinup_forcing, loc_forcing_t, space_output, space_land, tem_info, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ThreadsParallelization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Parallelizing TEM using qbmap</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parallelizeTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, space_forcing, space_spinup_forcing, loc_forcing_t, space_output, space_land, tem_info, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">QbmapParallelization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.runTEMOne-NTuple{4, Any}" href="#SindbadTEM.runTEMOne-NTuple{4, Any}"><span class="jlbinding">SindbadTEM.runTEMOne</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">runTEMOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, forcing, output_array</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, land_init, loc_ind, tem)</span></span></code></pre></div><p>run the SINDBAD TEM for one time step</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: a tuple of all models selected in the given model structure</p></li><li><p><code>loc_forcing</code>: a forcing NT for a single location</p></li><li><p><code>land_init</code>: initial SINDBAD land with all fields and subfields</p></li><li><p><code>tem</code>: a nested NT with necessary information of helpers, models, and spinup needed to run SINDBAD TEM and models</p></li></ul><p><strong>Returns:</strong></p><ul><li><p><code>loc_forcing_t</code>: the forcing NT for the current time step</p></li><li><p><code>loc_land</code>: the SINDBAD land NT after a run of model for one time step. This contains all the variables from the selected models and their structure and type will remain the same across the experiment.</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.sequenceForcing-Tuple{NamedTuple, Symbol}" href="#SindbadTEM.sequenceForcing-Tuple{NamedTuple, Symbol}"><span class="jlbinding">SindbadTEM.sequenceForcing</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sequenceForcing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_forcings</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forc_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Processes and sequences forcing data for spinup simulations.</p><p><strong>Arguments</strong></p><ul><li><p><code>spinup_forcings::NamedTuple</code>: A named tuple containing the forcing data for different spinup sequence</p></li><li><p><code>forc_name::Symbol</code>: Symbol indicating the name of the forcing data set to be extracted from the NT for the given sequence</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.setSpinupLog" href="#SindbadTEM.setSpinupLog"><span class="jlbinding">SindbadTEM.setSpinupLog</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(land, log_index, spinup_log_mode)</span></span></code></pre></div><p>Stores or skips the spinup log during the spinup process, depending on the specified <code>spinup_log_mode</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>land</code>: A SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every timestep.</p></li><li><p><code>log_index</code>: The index in the spinup log where the current state of <code>land.pools</code> will be stored.</p></li><li><p><code>spinup_log_mode</code>: A type dispatch that determines whether to store the spinup log:</p><ul><li><p><code>DoStoreSpinup</code>: Enables storing the spinup log at the specified <code>log_index</code>. Set the <code>store_spinup</code> flag to <code>true</code> in flag section of experiment_json.</p></li><li><p><code>DoNotStoreSpinup</code>: Skips storing the spinup log. Set the <code>store_spinup</code> flag to <code>false</code> in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>land</code>: The updated SINDBAD NamedTuple, potentially with the spinup log stored.</li></ul><p><strong>Notes:</strong></p><ul><li><p>When <code>DoStoreSpinup</code> is used:</p><ul><li>The function stores the current state of <code>land.pools</code> in <code>land.states.spinuplog</code> at the specified <code>log_index</code>.</li></ul></li><li><p>When <code>DoNotStoreSpinup</code> is used:</p><ul><li>The function does nothing and simply returns the input <code>land</code>.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Storing the spinup log</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, states </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (spinuplog </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Vector{Any}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(undef, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log_index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(land, log_index, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoStoreSpinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Skipping the spinup log</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pools </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, states </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (spinuplog </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Vector{Any}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(undef, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log_index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">land </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setSpinupLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(land, log_index, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotStoreSpinup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.spinupSequence-NTuple{9, Any}" href="#SindbadTEM.spinupSequence-NTuple{9, Any}"><span class="jlbinding">SindbadTEM.spinupSequence</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spinupSequence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, sel_forcing, loc_forcing_t, land, tem_info, n_timesteps, log_index, n_repeat, spinup_mode)</span></span></code></pre></div><p>Executes a sequence of model spinup iterations for the Terrestrial Ecosystem Model (TEM).</p><p><strong>Arguments</strong></p><ul><li><p><code>spinup_models</code>: Collection of model configurations for spinup</p></li><li><p><code>sel_forcing</code>: Selected forcing data</p></li><li><p><code>loc_forcing_t</code>: Localized forcing data with temporal component</p></li><li><p><code>land</code>: Land surface parameters</p></li><li><p><code>tem_info</code>: TEM model information and parameters</p></li><li><p><code>n_timesteps</code>: Number of timesteps for the spinup</p></li><li><p><code>log_index</code>: Index for logging purposes</p></li><li><p><code>n_repeat</code>: Number of times to repeat the spinup sequence</p></li><li><p><code>spinup_mode</code>: Mode of spinup operation (e.g., &quot;normal&quot;, &quot;accelerated&quot;)</p></li></ul><p><strong>Description</strong></p><p>Performs model spinup by running multiple iterations of the TEM model to achieve steady state conditions. The function handles different spinup modes and manages the sequence of model runs according to specified parameters.</p><p><strong>Returns</strong></p><p>land with the updated pools after the spinup sequence.</p></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.spinupSequenceLoop-NTuple{9, Any}" href="#SindbadTEM.spinupSequenceLoop-NTuple{9, Any}"><span class="jlbinding">SindbadTEM.spinupSequenceLoop</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">spinupSequenceLoop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spinup_models, sel_forcing, loc_forcing_t, land, tem_info, n_timesteps, log_loop, n_repeat, spinup_mode)</span></span></code></pre></div><p>Runs sequential loops for model spin-up simulations for each repeat of a spinup sequence.</p><p><strong>Arguments</strong></p><ul><li><p><code>spinup_models</code>: Collection of spin-up model instances</p></li><li><p><code>sel_forcing</code>: Selected forcing data</p></li><li><p><code>loc_forcing_t</code>: Localized forcing data in temporal dimension</p></li><li><p><code>land</code>: Land surface parameters/conditions</p></li><li><p><code>tem_info</code>: Model configuration and parameters for TEM</p></li><li><p><code>n_timesteps</code>: Number of timesteps to simulate</p></li><li><p><code>log_loop</code>: Boolean flag for logging loop information</p></li><li><p><code>n_repeat</code>: Number of times to repeat the spin-up loop</p></li><li><p><code>spinup_mode</code>: Mode of spin-up simulation (e.g., &quot;normal&quot;, &quot;accelerated&quot;)</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.timeAggregateForcingV-Tuple{Any, Any, Any, TimeIndexed}" href="#SindbadTEM.timeAggregateForcingV-Tuple{Any, Any, Any, TimeIndexed}"><span class="jlbinding">SindbadTEM.timeAggregateForcingV</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupForcing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_forcing_t, time_aggregator, tem_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TimeIndexed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>aggregate the forcing variable with time where an aggregation/collection is needed in time</p><p><strong>Arguments:</strong></p><ul><li><p><code>v</code>: a forcing variable</p></li><li><p><code>aggregator</code>: a time aggregator object/index needed to slice data</p></li><li><p><code>::TimeIndexed</code>: a type dispatch to just slice the variable time series using index</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.timeAggregateForcingV-Tuple{Any, Any, Any, TimeNoDiff}" href="#SindbadTEM.timeAggregateForcingV-Tuple{Any, Any, Any, TimeNoDiff}"><span class="jlbinding">SindbadTEM.timeAggregateForcingV</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getSpinupForcing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(forcing, loc_forcing_t, time_aggregator, tem_helpers, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TimeIndexed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>aggregate the forcing variable with time where an aggregation/collection is needed in time</p><p><strong>Arguments:</strong></p><ul><li><p><code>v</code>: a forcing variable</p></li><li><p><code>aggregator</code>: a time aggregator object needed to time aggregate the data</p></li><li><p><code>ag_type::TimeNoDiff</code>: a type dispatch to indicate that the variable has to be aggregated in time</p></li></ul></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.timeLoopTEM" href="#SindbadTEM.timeLoopTEM"><span class="jlbinding">SindbadTEM.timeLoopTEM</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, land_time_series, land, tem_info, debug_mode)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, land, tem_info, debug_mode)</span></span></code></pre></div><p>Executes the time loop for the SINDBAD Terrestrial Ecosystem Model (TEM), running the model for each time step using the provided forcing data and updating the land. There are two major variants with and without the preallocated land time series. In the debug mode only 1 time step is executed for debugging the allocations in each model.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>loc_forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for all locations.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>land_time_series</code>: A preallocated vector (length = number of time steps) to store SINDBAD land states for each time step.</p></li><li><p><code>land</code>: A SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every time step.</p></li><li><p><code>tem_info</code>: A helper NamedTuple containing necessary objects for model execution and type consistencies.</p></li><li><p><code>debug_mode</code>: A type dispatch that determines whether debugging is enabled or disabled:</p><ul><li><p><code>DoDebugModel</code>: Runs the model for a single time step and displays debugging information (e.g., allocations, execution time). Set<code>debug_model</code> to <code>true</code> in flag section of experiment_json.</p></li><li><p><code>DoNotDebugModel</code>: Runs the model for all time steps without debugging. Set<code>debug_model</code> to <code>false</code> in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>nothing</code>: The function modifies <code>land_time_series</code> in place to store the results for each time step.</li></ul><p><strong>Notes:</strong></p><ul><li><p>For each time step:</p><ul><li><p>The function retrieves the forcing data for the current time step using <code>getForcingForTimeStep</code>.</p></li><li><p>The model is executed using <code>computeTEM</code>, which updates the land state.</p></li><li><p>The updated land state is stored in <code>land_time_series</code>.</p></li></ul></li><li><p>When <code>DoDebugModel</code> is used:</p><ul><li>The function runs the model for a single time step and logs debugging information, such as execution time and memory allocations.</li></ul></li><li><p>When <code>DoNotDebugModel</code> is used:</p><ul><li>The function runs the model for all time steps in a loop.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Running the time loop without debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, land_time_series, land, tem_info, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Running the time loop with debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, land_time_series, land, tem_info, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.timeLoopTEM!" href="#SindbadTEM.timeLoopTEM!"><span class="jlbinding">SindbadTEM.timeLoopTEM!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, loc_output, land, forcing_types, model_helpers, output_vars, n_timesteps, debug_mode)</span></span></code></pre></div><p>Executes the time loop for the SINDBAD Terrestrial Ecosystem Model (TEM), running the model for each time step and storing the outputs in preallocated arrays.</p><p><strong>Arguments:</strong></p><ul><li><p><code>selected_models</code>: A tuple of all models selected in the given model structure.</p></li><li><p><code>loc_forcing</code>: A forcing NamedTuple containing the time series of environmental drivers for a single location.</p></li><li><p><code>loc_forcing_t</code>: A forcing NamedTuple for a single location and a single time step.</p></li><li><p><code>loc_output</code>: A preallocated output array or view for storing the model outputs for a single location.</p></li><li><p><code>land</code>: A SINDBAD NamedTuple containing all variables for a given time step, which is overwritten at every time step.</p></li><li><p><code>forcing_types</code>: A NamedTuple specifying the types of forcing variables (e.g., time-dependent or constant).</p></li><li><p><code>model_helpers</code>: A NamedTuple containing helper functions and configurations for model execution.</p></li><li><p><code>output_vars</code>: A list of output variables to be stored for each time step.</p></li><li><p><code>n_timesteps</code>: The total number of time steps to run the simulation.</p></li><li><p><code>debug_mode</code>: A type dispatch that determines whether debugging is enabled or disabled:</p><ul><li><p><code>DoDebugModel</code>: Runs the model for a single time step and logs debugging information (e.g., allocations, execution time). Set<code>debug_model</code> to <code>true</code> in flag section of experiment_json.</p></li><li><p><code>DoNotDebugModel</code>: Runs the model for all time steps without debugging. Set<code>debug_model</code> to <code>false</code> in flag section of experiment_json.</p></li></ul></li></ul><p><strong>Returns:</strong></p><ul><li><code>nothing</code>: The function modifies <code>loc_output</code> in place to store the results for each time step.</li></ul><p><strong>Notes:</strong></p><ul><li><p><strong>Forcing Retrieval</strong>:</p><ul><li>For each time step, the function retrieves the forcing data using <code>getForcingForTimeStep</code>.</li></ul></li><li><p><strong>Model Execution</strong>:</p><ul><li>The model is executed using <code>computeTEM</code>, which updates the land state.</li></ul></li><li><p><strong>Output Storage</strong>:</p><ul><li>The updated land state is stored in the preallocated <code>loc_output</code> array using <code>setOutputForTimeStep!</code>.</li></ul></li><li><p><strong>Debugging</strong>:</p><ul><li>When <code>DoDebugModel</code> is used, the function logs detailed debugging information for a single time step, including execution time and memory allocations.</li></ul></li></ul><p><strong>Examples:</strong></p><ol><li><strong>Running the time loop without debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, loc_output, land, forcing_types, model_helpers, output_vars, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Running the time loop with debugging</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeLoopTEM!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selected_models, loc_forcing, loc_forcing_t, loc_output, land, forcing_types, model_helpers, output_vars, n_timesteps, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoDebugModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div></details><details class="jldocstring custom-block" open><summary><a id="SindbadTEM.unpackYaxForward-Tuple{Any}" href="#SindbadTEM.unpackYaxForward-Tuple{Any}"><span class="jlbinding">SindbadTEM.unpackYaxForward</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unpackYaxForward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(args; tem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, forcing_vars</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>unpack the input and output cubes from all cubes thrown by mapCube</p><p><strong>Arguments:</strong></p><ul><li><p><code>all_cubes</code>: collection/tuple of all input and output cubes</p></li><li><p><code>forcing_vars</code>: forcing variables</p></li><li><p><code>output_vars</code>: output variables</p></li></ul></details></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-4f9813fa><span class="visually-hidden" id="doc-footer-aria-label" data-v-4f9813fa>Pager</span><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link prev" href="/pages/code/setup.html" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Previous page</span><span class="title" data-v-4f9813fa> + Setup</span><!--]--></a></div><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link next" href="/pages/code/utils.html" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Next page</span><span class="title" data-v-4f9813fa> + Utils</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860><a href="https://www.bgc-jena.mpg.de/en" target="_blank"><img src="/logo_mpi_grey.png" class="footer-logo" alt="MPI Logo"/></a></p><p class="copyright" data-v-c970a860>© Copyright 2025 <strong> SINDBAD Development Team</strong></span></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"Fzf0Ckif\",\"pages_about_citation.md\":\"BFd1n6rr\",\"pages_about_contact.md\":\"DsjGpQoK\",\"pages_about_license.md\":\"DgqbUKKv\",\"pages_about_publications.md\":\"Cny_ovyi\",\"pages_about_support.md\":\"DG6ERZ2Z\",\"pages_about_team.md\":\"DI5nf1mn\",\"pages_code_data.md\":\"B_FLdzoo\",\"pages_code_experiment.md\":\"D83mtYB5\",\"pages_code_metrics.md\":\"BsC3cTQO\",\"pages_code_ml.md\":\"CDPZSCgt\",\"pages_code_models.md\":\"BQbiGTOg\",\"pages_code_optimization.md\":\"zgTr1XuE\",\"pages_code_overview.md\":\"BzHWnNZg\",\"pages_code_setup.md\":\"CQruzA5K\",\"pages_code_sindbad.md\":\"B0cUhPS1\",\"pages_code_tem.md\":\"D291sNF-\",\"pages_code_types.md\":\"DKI_XF1l\",\"pages_code_utils.md\":\"CRMd3Nl8\",\"pages_code_visuals.md\":\"3uBsCZUb\",\"pages_concept_experiment.md\":\"BpzaS_ki\",\"pages_concept_info.md\":\"1a_wSAQS\",\"pages_concept_land.md\":\"DU1CDipL\",\"pages_concept_overview.md\":\"BW3u3IhW\",\"pages_concept_tem.md\":\"D6eQ2a6E\",\"pages_develop_array_handling.md\":\"DoOu-ekK\",\"pages_develop_conventions.md\":\"BpuRfPSn\",\"pages_develop_cost_function.md\":\"DS6vBqU7\",\"pages_develop_cost_metrics.md\":\"C4msQCqC\",\"pages_develop_experiments.md\":\"DJYVidGl\",\"pages_develop_helpers.md\":\"tpHRXQSU\",\"pages_develop_how_to_doc.md\":\"Djmcxot1\",\"pages_develop_install.md\":\"DzTrhBlK\",\"pages_develop_land_utils.md\":\"BZeVa6Tt\",\"pages_develop_model_approach.md\":\"BlRW9B0G\",\"pages_develop_optimization_method.md\":\"DLqvkqxm\",\"pages_develop_overview.md\":\"C9CLphj-\",\"pages_develop_sindbad_types.md\":\"Di6q-GKf\",\"pages_develop_spinup.md\":\"DcqzQaGO\",\"pages_settings_experiment.md\":\"wmvZo7Mx\",\"pages_settings_forcing.md\":\"DwzZq1gu\",\"pages_settings_model_structure.md\":\"DHa4ySB8\",\"pages_settings_optimization.md\":\"BUMhom9x\",\"pages_settings_overview.md\":\"BrwS7_Aw\",\"pages_settings_parameters.md\":\"CfJ6denj\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"SINDBAD\",\"description\":\"A model-data integration framework for terrestrial ecosystem processes\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"logo\":{\"src\":\"/sindbad_logo.png\",\"width\":24,\"height\":24},\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Concept\",\"items\":[{\"text\":\"SINDBAD\",\"link\":\"/pages/concept/overview\"},{\"text\":\"Experiment\",\"link\":\"/pages/concept/experiment\"},{\"text\":\"TEM\",\"link\":\"/pages/concept/TEM\"},{\"text\":\"info\",\"link\":\"/pages/concept/info\"},{\"text\":\"land\",\"link\":\"/pages/concept/land\"}]},{\"text\":\"Settings\",\"items\":[{\"text\":\"Overview\",\"link\":\"/pages/settings/overview\"},{\"text\":\"Experiments\",\"link\":\"/pages/settings/experiment\"},{\"text\":\"Forcing\",\"link\":\"/pages/settings/forcing\"},{\"text\":\"Models\",\"link\":\"/pages/settings/model_structure\"},{\"text\":\"Optimization\",\"link\":\"/pages/settings/optimization\"},{\"text\":\"Parameters\",\"link\":\"/pages/settings/parameters\"}]},{\"text\":\"Code\",\"items\":[{\"text\":\"Sindbad\",\"link\":\"/pages/code/overview\"},{\"text\":\" + Core\",\"link\":\"/pages/code/sindbad\"},{\"text\":\"   ++ Models\",\"link\":\"/pages/code/models\"},{\"text\":\"   ++ Types\",\"link\":\"/pages/code/types\"},{\"text\":\" + Data\",\"link\":\"/pages/code/data\"},{\"text\":\" + Experiment\",\"link\":\"/pages/code/experiment\"},{\"text\":\" + Metrics\",\"link\":\"/pages/code/metrics\"},{\"text\":\" + ML\",\"link\":\"/pages/code/ml\"},{\"text\":\" + Optimization\",\"link\":\"/pages/code/optimization\"},{\"text\":\" + Setup\",\"link\":\"/pages/code/setup\"},{\"text\":\" + TEM\",\"link\":\"/pages/code/tem\"},{\"text\":\" + Utils\",\"link\":\"/pages/code/utils\"},{\"text\":\" + Visuals\",\"link\":\"/pages/code/visuals\"}]},{\"text\":\"Develop\",\"items\":[{\"text\":\"Overview\",\"link\":\"/pages/develop/overview\"},{\"text\":\"Install\",\"link\":\"/pages/develop/install\"},{\"text\":\"Modeling Convention\",\"link\":\"/pages/develop/conventions\"},{\"text\":\"Model/Approach\",\"link\":\"/pages/develop/model_approach\"},{\"text\":\"Sindbad Types\",\"link\":\"/pages/develop/sindbad_types\"},{\"text\":\"Array Handling\",\"link\":\"/pages/develop/array_handling\"},{\"text\":\"Land Utils\",\"link\":\"/pages/develop/land_utils\"},{\"text\":\"Experiments\",\"link\":\"/pages/develop/experiments\"},{\"text\":\"Spinup\",\"link\":\"/pages/develop/spinup\"},{\"text\":\"Optimization Methods\",\"link\":\"/pages/develop/optimization_method\"},{\"text\":\"Cost Metrics\",\"link\":\"/pages/develop/cost_metrics\"},{\"text\":\"Cost Function\",\"link\":\"/pages/develop/cost_function\"},{\"text\":\"Documentation\",\"link\":\"/pages/develop/how_to_doc\"},{\"text\":\"Useful Helpers\",\"link\":\"/pages/develop/helpers\"}]},{\"text\":\"About\",\"items\":[{\"text\":\"Contact\",\"link\":\"/pages/about/contact\"},{\"text\":\"License\",\"link\":\"/pages/about/license\"},{\"text\":\"Publications\",\"link\":\"/pages/about/publications\"},{\"text\":\"Support\",\"link\":\"/pages/about/support\"},{\"text\":\"Team\",\"link\":\"/pages/about/team\"}]},{\"component\":\"VersionPicker\"}],\"sidebar\":[{\"text\":\"Concept\",\"items\":[{\"text\":\"SINDBAD\",\"link\":\"/pages/concept/overview\"},{\"text\":\"Experiment\",\"link\":\"/pages/concept/experiment\"},{\"text\":\"TEM\",\"link\":\"/pages/concept/TEM\"},{\"text\":\"info\",\"link\":\"/pages/concept/info\"},{\"text\":\"land\",\"link\":\"/pages/concept/land\"}]},{\"text\":\"Develop\",\"items\":[{\"text\":\"Overview\",\"link\":\"/pages/develop/overview\"},{\"text\":\"Install\",\"link\":\"/pages/develop/install\"},{\"text\":\"Modeling Convention\",\"link\":\"/pages/develop/conventions\"},{\"text\":\"Model/Approach\",\"link\":\"/pages/develop/model_approach\"},{\"text\":\"Sindbad Types\",\"link\":\"/pages/develop/sindbad_types\"},{\"text\":\"Array Handling\",\"link\":\"/pages/develop/array_handling\"},{\"text\":\"Land Utils\",\"link\":\"/pages/develop/land_utils\"},{\"text\":\"Experiments\",\"link\":\"/pages/develop/experiments\"},{\"text\":\"Spinup\",\"link\":\"/pages/develop/spinup\"},{\"text\":\"Optimization Methods\",\"link\":\"/pages/develop/optimization_method\"},{\"text\":\"Cost Metrics\",\"link\":\"/pages/develop/cost_metrics\"},{\"text\":\"Cost Function\",\"link\":\"/pages/develop/cost_function\"},{\"text\":\"Documentation\",\"link\":\"/pages/develop/how_to_doc\"},{\"text\":\"Useful Helpers\",\"link\":\"/pages/develop/helpers\"}]},{\"text\":\"Settings\",\"items\":[{\"text\":\"Overview\",\"link\":\"/pages/settings/overview\"},{\"text\":\"Experiments\",\"link\":\"/pages/settings/experiment\"},{\"text\":\"Forcing\",\"link\":\"/pages/settings/forcing\"},{\"text\":\"Models\",\"link\":\"/pages/settings/model_structure\"},{\"text\":\"Optimization\",\"link\":\"/pages/settings/optimization\"},{\"text\":\"Parameters\",\"link\":\"/pages/settings/parameters\"}]},{\"text\":\"Code\",\"collapsed\":true,\"items\":[{\"text\":\"Sindbad\",\"link\":\"/pages/code/overview\"},{\"text\":\" + Core\",\"link\":\"/pages/code/sindbad\"},{\"text\":\"   ++ Models\",\"link\":\"/pages/code/models\"},{\"text\":\"   ++ Types\",\"link\":\"/pages/code/types\"},{\"text\":\" + Data\",\"link\":\"/pages/code/data\"},{\"text\":\" + Experiment\",\"link\":\"/pages/code/experiment\"},{\"text\":\" + Metrics\",\"link\":\"/pages/code/metrics\"},{\"text\":\" + ML\",\"link\":\"/pages/code/ml\"},{\"text\":\" + Optimization\",\"link\":\"/pages/code/optimization\"},{\"text\":\" + Setup\",\"link\":\"/pages/code/setup\"},{\"text\":\" + TEM\",\"link\":\"/pages/code/tem\"},{\"text\":\" + Utils\",\"link\":\"/pages/code/utils\"},{\"text\":\" + Visuals\",\"link\":\"/pages/code/visuals\"}]},{\"text\":\"About\",\"items\":[{\"text\":\"Contact\",\"link\":\"/pages/about/contact\"},{\"text\":\"License\",\"link\":\"/pages/about/license\"},{\"text\":\"Publications\",\"link\":\"/pages/about/publications\"},{\"text\":\"Support\",\"link\":\"/pages/about/support\"},{\"text\":\"Team\",\"link\":\"/pages/about/team\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/EarthyScience/SINDBAD\",\"ariaLabel\":\"repo address\"}],\"footer\":{\"message\":\"<a href=\\\"https://www.bgc-jena.mpg.de/en\\\" target=\\\"_blank\\\"><img src=\\\"/logo_mpi_grey.png\\\" class=\\\"footer-logo\\\" alt=\\\"MPI Logo\\\"/></a>\",\"copyright\":\"© Copyright 2025 <strong> SINDBAD Development Team</strong></span>\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>