import{_ as l,C as r,c as p,o as d,j as s,aA as n,G as a,a as t,w as o}from"./chunks/framework.9f8xoYNT.js";const T=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"pages/code/metrics.md","filePath":"pages/code/metrics.md","lastUpdated":null}'),c={name:"pages/code/metrics.md"},h={class:"jldocstring custom-block",open:""},k={class:"jldocstring custom-block",open:""},g={class:"jldocstring custom-block",open:""},u={class:"jldocstring custom-block",open:""},b={class:"jldocstring custom-block",open:""},m={class:"jldocstring custom-block",open:""},y={class:"jldocstring custom-block",open:""},E={class:"jldocstring custom-block",open:""},f={class:"jldocstring custom-block",open:""},v={class:"jldocstring custom-block",open:""},S={class:"jldocstring custom-block",open:""};function C(F,i,A,_,D,N){const e=r("Badge");return d(),p("div",null,[s("details",h,[s("summary",null,[i[0]||(i[0]=s("a",{id:"SindbadMetrics",href:"#SindbadMetrics"},[s("span",{class:"jlbinding"},"SindbadMetrics")],-1)),i[1]||(i[1]=t()),a(e,{type:"info",class:"jlObjectType jlModule",text:"Module"})]),i[3]||(i[3]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SindbadMetrics</span></span></code></pre></div><p>The <code>SindbadMetrics</code> package provides tools for evaluating the performance of SINDBAD models. It includes a variety of metrics for comparing model outputs with observations, calculating statistical measures, and updating model parameters based on evaluation results.</p><p><strong>Purpose:</strong></p><p>This package is designed to define and compute metrics that assess the accuracy and reliability of SINDBAD models. It supports a wide range of statistical and performance metrics, enabling robust model evaluation and calibration.</p><p>It has heavy usage in <code>SindbadOptimization</code> but the package is separated to reduce to import burdens of optimization schemes. This allows for import into independent workflows for model evaluation and parameter estimation, e.g., in hybrid modeling.</p><p><strong>Dependencies:</strong></p><ul><li><p><code>Sindbad</code>: Provides the core SINDBAD models and types.</p></li><li><p><code>SindbadUtils</code>: Provides utility functions for handling data and NamedTuples, which are essential for metric calculations.</p></li></ul><p><strong>Included Files:</strong></p><ol><li><strong><code>handleDataForLoss.jl</code></strong>:</li></ol><ul><li>Implements functions for preprocessing and handling data before calculating loss functions or metrics.</li></ul><ol start="2"><li><strong><code>getMetrics.jl</code></strong>:</li></ol><ul><li>Provides functions for retrieving and organizing metrics based on model outputs and observations.</li></ul><ol start="3"><li><strong><code>metrics.jl</code></strong>:</li></ol><ul><li>Contains the core metric definitions, including statistical measures (e.g., RMSE, correlation) and custom metrics for SINDBAD experiments.</li></ul><div class="tip custom-block"><p class="custom-block-title">Note</p><ul><li><p>The package is designed to be extensible, allowing users to define custom metrics for specific use cases.</p></li><li><p>Metrics are computed in a modular fashion, ensuring compatibility with SINDBAD&#39;s optimization and evaluation workflows.</p></li><li><p>Supports both standard statistical metrics and domain-specific metrics tailored to SINDBAD experiments.</p></li></ul></div><p><strong>Examples:</strong></p><ol><li><strong>Calculating RMSE</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SindbadMetrics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rmse </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output, observations, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RMSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><ol><li><strong>Computing correlation</strong>:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SindbadMetrics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">correlation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output, observations, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Pcor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div>`,20)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[2]||(i[2]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/SindbadMetrics.jl#L1-L46",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i[44]||(i[44]=s("h2",{id:"Exported",tabindex:"-1"},[t("Exported "),s("a",{class:"header-anchor",href:"#Exported","aria-label":'Permalink to "Exported {#Exported}"'},"​")],-1)),s("details",k,[s("summary",null,[i[4]||(i[4]=s("a",{id:"SindbadMetrics.combineMetric",href:"#SindbadMetrics.combineMetric"},[s("span",{class:"jlbinding"},"SindbadMetrics.combineMetric")],-1)),i[5]||(i[5]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[7]||(i[7]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">combineMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(metric_vector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MetricSum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">combineMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(metric_vector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MetricMinimum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">combineMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(metric_vector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MetricMaximum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">combineMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(metric_vector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, percentile_value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>combines the metric from all constraints based on the type of combination.</p><p><strong>Arguments:</strong></p><ul><li><code>metric_vector</code>: a vector of metrics for variables</li></ul><p><strong>methods for combining the metric</strong></p><ul><li><p><code>::MetricSum</code>: return the total sum as the metric.</p></li><li><p><code>::MetricMinimum</code>: return the minimum of the <code>metric_vector</code> as the metric.</p></li><li><p><code>::MetricMaximum</code>: return the maximum of the <code>metric_vector</code> as the metric.</p></li><li><p><code>percentile_value::T</code>: <code>percentile_value^th</code> percentile of metric of each constraint as the overall metric</p></li></ul>`,6)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[6]||(i[6]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/getMetrics.jl#L5-L22",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",g,[s("summary",null,[i[8]||(i[8]=s("a",{id:"SindbadMetrics.getData",href:"#SindbadMetrics.getData"},[s("span",{class:"jlbinding"},"SindbadMetrics.getData")],-1)),i[9]||(i[9]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[11]||(i[11]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LandWrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, observations, cost_option)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, observations, cost_option)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, observations, cost_option)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>model_output</code>: a collection of SINDBAD model output time series as a time series of stacked land NT or as a preallocated array.</p></li><li><p><code>observations</code>: a NT or a vector of arrays of observations, their uncertainties, and mask to use for calculation of performance metric/loss</p></li><li><p><code>cost_option</code>: information for a observation constraint on how it should be used to calculate the loss/metric of model performance</p></li></ul>`,3)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[10]||(i[10]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L93-L102",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",u,[s("summary",null,[i[12]||(i[12]=s("a",{id:"SindbadMetrics.getDataWithoutNaN",href:"#SindbadMetrics.getDataWithoutNaN"},[s("span",{class:"jlbinding"},"SindbadMetrics.getDataWithoutNaN")],-1)),i[13]||(i[13]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[15]||(i[15]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getDataWithoutNaN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, ŷ, idxs)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">getDataWithoutNaN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, ŷ)</span></span></code></pre></div><p>return model and obs data excluding for the common <code>NaN</code> or for the valid pixels <code>idxs</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>y</code>: observation data</p></li><li><p><code>yσ</code>: observational uncertainty data</p></li><li><p><code>ŷ</code>: model simulation data/estimate</p></li><li><p><code>idxs</code>: indices of valid data points</p></li></ul>`,4)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[14]||(i[14]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/getMetrics.jl#L43-L54",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",b,[s("summary",null,[i[16]||(i[16]=s("a",{id:"SindbadMetrics.getModelOutputView-Union{Tuple{AbstractArray{<:Any, N}}, Tuple{N}} where N",href:"#SindbadMetrics.getModelOutputView-Union{Tuple{AbstractArray{<:Any, N}}, Tuple{N}} where N"},[s("span",{class:"jlbinding"},"SindbadMetrics.getModelOutputView")],-1)),i[17]||(i[17]=t()),a(e,{type:"info",class:"jlObjectType jlMethod",text:"Method"})]),i[19]||(i[19]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> getModelOutputView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_dat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray{&lt;:Any,N}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> N</span></span></code></pre></div>',1)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[18]||(i[18]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L158-L162",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",m,[s("summary",null,[i[20]||(i[20]=s("a",{id:"SindbadMetrics.metric",href:"#SindbadMetrics.metric"},[s("span",{class:"jlbinding"},"SindbadMetrics.metric")],-1)),i[21]||(i[21]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[23]||(i[23]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, yσ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ŷ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PerfMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>calculate the performance/loss metric for given observation and model simulation data stream</p><p><strong>Arguments:</strong></p><ul><li><p><code>y</code>: observation data</p></li><li><p><code>yσ</code>: observational uncertainty data</p></li><li><p><code>ŷ</code>: model simulation data</p></li></ul><p><strong>Returns:</strong></p><ul><li><code>metric</code>: The calculated metric value</li></ul><p><strong>PerfMetric</strong></p><p>Abstract type for performance metrics in SINDBAD</p><p><strong>Available methods/subtypes:</strong></p><ul><li><p><code>MSE</code>: Mean Squared Error: Measures the average squared difference between predicted and observed values</p></li><li><p><code>NAME1R</code>: Normalized Absolute Mean Error with 1/R scaling: Measures the absolute difference between means normalized by the range of observations</p></li><li><p><code>NMAE1R</code>: Normalized Mean Absolute Error with 1/R scaling: Measures the average absolute error normalized by the range of observations</p></li><li><p><code>NNSE</code>: Normalized Nash-Sutcliffe Efficiency: Measures model performance relative to the mean of observations, normalized to [0,1] range</p></li><li><p><code>NNSEInv</code>: Inverse Normalized Nash-Sutcliffe Efficiency: Inverse of NNSE for minimization problems, normalized to [0,1] range</p></li><li><p><code>NNSEσ</code>: Normalized Nash-Sutcliffe Efficiency with uncertainty: Incorporates observation uncertainty in the normalized performance measure</p></li><li><p><code>NNSEσInv</code>: Inverse Normalized Nash-Sutcliffe Efficiency with uncertainty: Inverse of NNSEσ for minimization problems</p></li><li><p><code>NPcor</code>: Normalized Pearson Correlation: Measures linear correlation between predictions and observations, normalized to [0,1] range</p></li><li><p><code>NPcorInv</code>: Inverse Normalized Pearson Correlation: Inverse of NPcor for minimization problems</p></li><li><p><code>NSE</code>: Nash-Sutcliffe Efficiency: Measures model performance relative to the mean of observations</p></li><li><p><code>NSEInv</code>: Inverse Nash-Sutcliffe Efficiency: Inverse of NSE for minimization problems</p></li><li><p><code>NSEσ</code>: Nash-Sutcliffe Efficiency with uncertainty: Incorporates observation uncertainty in the performance measure</p></li><li><p><code>NSEσInv</code>: Inverse Nash-Sutcliffe Efficiency with uncertainty: Inverse of NSEσ for minimization problems</p></li><li><p><code>NScor</code>: Normalized Spearman Correlation: Measures monotonic relationship between predictions and observations, normalized to [0,1] range</p></li><li><p><code>NScorInv</code>: Inverse Normalized Spearman Correlation: Inverse of NScor for minimization problems</p></li><li><p><code>Pcor</code>: Pearson Correlation: Measures linear correlation between predictions and observations</p></li><li><p><code>Pcor2</code>: Squared Pearson Correlation: Measures the strength of linear relationship between predictions and observations</p></li><li><p><code>Pcor2Inv</code>: Inverse Squared Pearson Correlation: Inverse of Pcor2 for minimization problems</p></li><li><p><code>PcorInv</code>: Inverse Pearson Correlation: Inverse of Pcor for minimization problems</p></li><li><p><code>Scor</code>: Spearman Correlation: Measures monotonic relationship between predictions and observations</p></li><li><p><code>Scor2</code>: Squared Spearman Correlation: Measures the strength of monotonic relationship between predictions and observations</p></li><li><p><code>Scor2Inv</code>: Inverse Squared Spearman Correlation: Inverse of Scor2 for minimization problems</p></li><li><p><code>ScorInv</code>: Inverse Spearman Correlation: Inverse of Scor for minimization problems</p></li></ul>',10)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[22]||(i[22]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/metrics.jl#L3-L18",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",y,[s("summary",null,[i[24]||(i[24]=s("a",{id:"SindbadMetrics.metricVector",href:"#SindbadMetrics.metricVector"},[s("span",{class:"jlbinding"},"SindbadMetrics.metricVector")],-1)),i[25]||(i[25]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[27]||(i[27]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">metricVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LandWrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, observations, cost_options)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">metricVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output, observations, cost_options)</span></span></code></pre></div><p>returns a vector of metrics for variables in cost_options.variable.</p><p><strong>Arguments:</strong></p><ul><li><p><code>observations</code>: a NT or a vector of arrays of observations, their uncertainties, and mask to use for calculation of performance metric/loss</p></li><li><p><code>model_output</code>: a collection of SINDBAD model output time series as a time series of stacked land NT</p></li><li><p><code>cost_options</code>: a table listing each observation constraint and how it should be used to calculate the loss/metric of model performance</p></li></ul>`,4)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[26]||(i[26]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/getMetrics.jl#L71-L81",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i[45]||(i[45]=s("h2",{id:"Internal",tabindex:"-1"},[t("Internal "),s("a",{class:"header-anchor",href:"#Internal","aria-label":'Permalink to "Internal {#Internal}"'},"​")],-1)),s("details",E,[s("summary",null,[i[28]||(i[28]=s("a",{id:"SindbadMetrics.aggregateData",href:"#SindbadMetrics.aggregateData"},[s("span",{class:"jlbinding"},"SindbadMetrics.aggregateData")],-1)),i[29]||(i[29]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[31]||(i[31]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">aggregateData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, cost_option, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TimeSpace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">aggregateData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, cost_option, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SpaceTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>aggregate the data based on the order of aggregation.</p><p><strong>Arguments:</strong></p><ul><li><p><code>dat</code>: a data array/vector to aggregate</p></li><li><p><code>cost_option</code>: information for a observation constraint on how it should be used to calculate the loss/metric of model performance</p></li><li><p><code>::TimeSpace</code>: appropriate type dispatch for the order of aggregation</p></li><li><p><code>::SpaceTime</code>: appropriate type dispatch for the order of aggregation</p></li></ul>`,4)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[30]||(i[30]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L5-L16",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",f,[s("summary",null,[i[32]||(i[32]=s("a",{id:"SindbadMetrics.aggregateObsData",href:"#SindbadMetrics.aggregateObsData"},[s("span",{class:"jlbinding"},"SindbadMetrics.aggregateObsData")],-1)),i[33]||(i[33]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[35]||(i[35]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">aggregateObsData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, cost_option, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoAggrObs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">aggregateObsData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, _, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotAggrObs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>y</code>: observation data</p></li><li><p><code>yσ</code>: observational uncertainty data</p></li><li><p><code>cost_option</code>: information for a observation constraint on how it should be used to calculate the loss/metric of model performance</p></li><li><p><code>::DoAggrObs</code>: appropriate type dispatch for aggregation of observation data</p></li><li><p><code>::DoNotAggrObs</code>: appropriate type dispatch for not aggregating observation data</p></li></ul>`,3)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[34]||(i[34]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L33-L43",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",v,[s("summary",null,[i[36]||(i[36]=s("a",{id:"SindbadMetrics.applySpatialWeight",href:"#SindbadMetrics.applySpatialWeight"},[s("span",{class:"jlbinding"},"SindbadMetrics.applySpatialWeight")],-1)),i[37]||(i[37]=t()),a(e,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[39]||(i[39]=n(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">applySpatialWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, ŷ, cost_option, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoSpatialWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">applySpatialWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y, yσ, ŷ, _, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DoNotSpatialWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>return model and obs data after applying the area weight.</p><p><strong>Arguments:</strong></p><ul><li><p><code>y</code>: observation data</p></li><li><p><code>yσ</code>: observational uncertainty data</p></li><li><p><code>ŷ</code>: model simulation data/estimate</p></li><li><p><code>::DoSpatialWeight</code>: type dispatch for doing area weight</p></li><li><p><code>::DoNotSpatialWeight</code>: type dispatch for not doing area weight</p></li></ul>`,4)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[38]||(i[38]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L56-L68",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",S,[s("summary",null,[i[40]||(i[40]=s("a",{id:"SindbadMetrics.doSpatialAggregation-Tuple{Any, Any, ConcatData}",href:"#SindbadMetrics.doSpatialAggregation-Tuple{Any, Any, ConcatData}"},[s("span",{class:"jlbinding"},"SindbadMetrics.doSpatialAggregation")],-1)),i[41]||(i[41]=t()),a(e,{type:"info",class:"jlObjectType jlMethod",text:"Method"})]),i[43]||(i[43]=n('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">doSpatialAggregation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dat, _, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ConcatData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Arguments:</strong></p><ul><li><p><code>dat</code>: a data array/vector to aggregate</p></li><li><p><code>_</code>: unused argument</p></li><li><p><code>::ConcatData</code>: A type indicating that the data should not be aggregated spatially</p></li></ul>',3)),a(e,{type:"info",class:"source-link",text:"source"},{default:o(()=>[...i[42]||(i[42]=[s("a",{href:"https://github.com/EarthyScience/SINDBAD/blob/517fba151cd110f0901a400ca160cb14385aee93/SindbadMetrics/src/handleDataForLoss.jl#L174-L181",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const j=l(c,[["render",C]]);export{T as __pageData,j as default};
